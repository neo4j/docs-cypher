:description: Syntax for how to manage constraints used for ensuring data integrity.

[[constraints-syntax]]
= Syntax
:check-mark: icon:check[]

[[constraints-syntax-create]]
== Syntax for creating constraints

Best practice when creating a constraint is to give the constraint a name.
This name must be unique among both indexes and constraints.
If a name is not explicitly given, a unique name will be auto-generated.

The `CREATE CONSTRAINT` command is optionally idempotent. 
This means its default behavior is to throw an error if an attempt is made to create the same constraint twice.
With the `IF NOT EXISTS` flag, no error is thrown and nothing happens should a constraint with the same name or same schema and constraint type already exist.
It may still throw an error if conflicting data, indexes, or constraints exist.
Examples of this are nodes with missing properties, indexes with the same name, or constraints with same schema but a different conflicting constraint type.
As of Neo4j 5.17, an informational notification is returned in case nothing happens showing the existing constraint which blocks the creation.

For constraints that are backed by an index, the index provider for the backing index can be specified using the `OPTIONS` clause.
Only one valid value exists for the index provider, `range-1.0`, which is the default value.
There is no supported index configuration for range indexes.

[NOTE]
====
Creating a constraint requires the link:{neo4j-docs-base-uri}/operations-manual/{page-version}/authentication-authorization/database-administration/#access-control-database-administration-constraints[`CREATE CONSTRAINT` privilege].
====

[[constraints-syntax-create-node-unique]]
=== Node property uniqueness constraint

This command creates a property uniqueness constraint on nodes with the specified label and properties.

[source, syntax, role="noheader", indent=0]
----
CREATE CONSTRAINT [constraint_name] [IF NOT EXISTS]
FOR (n:LabelName)
REQUIRE n.propertyName IS [NODE] UNIQUE
[OPTIONS "{" option: value[, ...] "}"]
----

[source, syntax, role="noheader", indent=0]
----
CREATE CONSTRAINT [constraint_name] [IF NOT EXISTS]
FOR (n:LabelName)
REQUIRE (n.propertyName_1, ..., n.propertyName_n) IS [NODE] UNIQUE
[OPTIONS "{" option: value[, ...] "}"]
----

Index provider can be specified using the `OPTIONS` clause.


[[constraints-syntax-create-rel-unique]]
=== Relationship property uniqueness constraint

This command creates a property uniqueness constraint on relationships with the specified relationship type and properties.

[source, syntax, role="noheader", indent=0]
----
CREATE CONSTRAINT [constraint_name] [IF NOT EXISTS]
FOR ()-"["r:RELATIONSHIP_TYPE"]"-()
REQUIRE r.propertyName IS [REL[ATIONSHIP]] UNIQUE
[OPTIONS "{" option: value[, ...] "}"]
----

[source, syntax, role="noheader", indent=0]
----
CREATE CONSTRAINT [constraint_name] [IF NOT EXISTS]
FOR ()-"["r:RELATIONSHIP_TYPE"]"-()
REQUIRE (r.propertyName_1, ..., r.propertyName_n) IS [REL[ATIONSHIP]] UNIQUE
[OPTIONS "{" option: value[, ...] "}"]
----

Index provider can be specified using the `OPTIONS` clause.

[role=label--enterprise-edition]
[[constraints-syntax-create-node-exists]]
=== Node property existence constraint

This command creates a property existence constraint on nodes with the specified label and property.

[source, syntax, role="noheader", indent=0]
----
CREATE CONSTRAINT [constraint_name] [IF NOT EXISTS]
FOR (n:LabelName)
REQUIRE n.propertyName IS NOT NULL
[OPTIONS "{" "}"]
----

[NOTE]
====
There are no supported `OPTIONS` values for existence constraints, but an empty options map is allowed for consistency.
====


[role=label--enterprise-edition]
[[constraints-syntax-create-rel-exists]]
=== Relationship property existence constraint

This command creates a property existence constraint on relationships with the specified relationship type and property.

[source, syntax, role="noheader", indent=0]
----
CREATE CONSTRAINT [constraint_name] [IF NOT EXISTS]
FOR ()-"["r:RELATIONSHIP_TYPE"]"-()
REQUIRE r.propertyName IS NOT NULL
[OPTIONS "{" "}"]
----

[NOTE]
====
There are no supported `OPTIONS` values for existence constraints, but an empty options map is allowed for consistency.
====

[role=label--enterprise-edition label]
[[constraints-syntax-create-node-prop-type]]
=== Node property type constraint 

This command creates a property type constraint on nodes with the specified label and property.

[source, syntax, role="noheader", indent=0]
----
CREATE CONSTRAINT [constraint_name] [IF NOT EXISTS]
FOR (n:LabelName)
REQUIRE n.propertyName {[IS] :: | IS TYPED} <TYPE>
[OPTIONS "{" "}"]
----

The three variations of the expression, `IS ::`, `::`, and `IS TYPED` are syntactic synonyms for the same expression.
The preferred syntax is the `IS ::` variant.

Where `<TYPE>` is one of the following property types:

* `BOOLEAN`
* `STRING`
* `INTEGER`
* `FLOAT`
* `DATE`
* `LOCAL TIME`
* `ZONED TIME`
* `LOCAL DATETIME`
* `ZONED DATETIME`
* `DURATION`
* `POINT`
* `LIST<BOOLEAN NOT NULL>` 
* `LIST<STRING NOT NULL>` 
* `LIST<INTEGER NOT NULL>` 
* `LIST<FLOAT NOT NULL>` 
* `LIST<DATE NOT NULL>` 
* `LIST<LOCAL TIME NOT NULL>` 
* `LIST<ZONED TIME NOT NULL>` 
* `LIST<LOCAL DATETIME NOT NULL>` 
* `LIST<ZONED DATETIME NOT NULL>` 
* `LIST<DURATION NOT NULL>` 
* `LIST<POINT NOT NULL>` 
* Any closed dynamic union of the above types, e.g. `INTEGER | FLOAT | STRING`. 

Allowed syntax variations of these types are listed xref::values-and-types/property-structural-constructed.adoc#types-synonyms[here].

[NOTE]
====
There are no supported `OPTIONS` values for property type constraints, but an empty options map is allowed for consistency.
====

[role=label--enterprise-edition label]
[[constraints-syntax-create-rel-prop-type]]
=== Relationship property type constraint

This command creates a property type constraint on relationships with the specified relationship type and property.

[source, syntax, role="noheader", indent=0]
----
CREATE CONSTRAINT [constraint_name] [IF NOT EXISTS]
FOR ()-"["r:RELATIONSHIP_TYPE"]"-()
REQUIRE r.propertyName {[IS] :: | IS TYPED} <TYPE>
[OPTIONS "{" "}"]
----

The three variations of the expression, `IS ::`, `::`, and `IS TYPED` are syntactic synonyms for the same expression.
The preferred syntax is the `IS ::` variant.

Where `<TYPE>` is one of the following property types:

* `BOOLEAN`
* `STRING`
* `INTEGER`
* `FLOAT`
* `DATE`
* `LOCAL TIME`
* `ZONED TIME`
* `LOCAL DATETIME`
* `ZONED DATETIME`
* `DURATION`
* `POINT`
* `LIST<BOOLEAN NOT NULL>` 
* `LIST<STRING NOT NULL>` 
* `LIST<INTEGER NOT NULL>` 
* `LIST<FLOAT NOT NULL>` 
* `LIST<DATE NOT NULL>` 
* `LIST<LOCAL TIME NOT NULL>` 
* `LIST<ZONED TIME NOT NULL>` 
* `LIST<LOCAL DATETIME NOT NULL>` 
* `LIST<ZONED DATETIME NOT NULL>` 
* `LIST<DURATION NOT NULL>` 
* `LIST<POINT NOT NULL>` 
* Any closed dynamic union of the above types, e.g. `INTEGER | FLOAT | STRING`. 

Allowed syntax variations of these types are listed xref::values-and-types/property-structural-constructed.adoc#types-synonyms[here].

[NOTE]
====
There are no supported `OPTIONS` values for property type constraints, but an empty options map is allowed for consistency.
====

[role=label--enterprise-edition]
[[constraints-syntax-create-node-key]]
=== Node key constraint

This command creates a node key constraint on nodes with the specified label and properties.

[source, syntax, role="noheader", indent=0]
----
CREATE CONSTRAINT [constraint_name] [IF NOT EXISTS]
FOR (n:LabelName)
REQUIRE n.propertyName IS [NODE] KEY
[OPTIONS "{" option: value[, ...] "}"]
----

[source, syntax, role="noheader", indent=0]
----
CREATE CONSTRAINT [constraint_name] [IF NOT EXISTS]
FOR (n:LabelName)
REQUIRE (n.propertyName_1, ..., n.propertyName_n) IS [NODE] KEY
[OPTIONS "{" option: value[, ...] "}"]
----

Index provider can be specified using the `OPTIONS` clause.

[role=label--enterprise-edition label]
[[constraints-syntax-create-rel-key]]
=== Relationship key constraint

This command creates a relationship key constraint on relationships with the specified relationship type and properties.

[source, syntax, role="noheader", indent=0]
----
CREATE CONSTRAINT [constraint_name] [IF NOT EXISTS]
FOR ()-"["r:RELATIONSHIP_TYPE"]"-()
REQUIRE r.propertyName IS [REL[ATIONSHIP]] KEY
[OPTIONS "{" option: value[, ...] "}"]
----

[source, syntax, role="noheader", indent=0]
----
CREATE CONSTRAINT [constraint_name] [IF NOT EXISTS]
FOR ()-"["r:RELATIONSHIP_TYPE"]"-()
REQUIRE (r.propertyName_1, ..., r.propertyName_n) IS [REL[ATIONSHIP]] KEY
[OPTIONS "{" option: value[, ...] "}"]
----

Index provider can be specified using the `OPTIONS` clause.


[[constraints-syntax-drop]]
== Syntax for dropping constraints

Dropping a constraint is done by specifying the name of the constraint.

[source, syntax, role="noheader", indent=0]
----
DROP CONSTRAINT constraint_name [IF EXISTS]
----

This drop command is optionally idempotent. This means its default behavior is to throw an error if an attempt is made to drop the same constraint twice.
With the `IF EXISTS` flag, no error is thrown and nothing happens should the constraint not exist.
As of Neo4j 5.17, an informational notification is instead returned detailing that the constraint does not exist.

[NOTE]
====
Dropping a constraint requires the link:{neo4j-docs-base-uri}/operations-manual/{page-version}/authentication-authorization/database-administration/#access-control-database-administration-constraints[`DROP CONSTRAINT` privilege].
====


[[constraints-syntax-list]]
== Syntax for listing constraints

List constraints in the database, either all or filtered on constraint type.

[NOTE]
====
Listing constraints requires the link:{neo4j-docs-base-uri}/operations-manual/{page-version}/authentication-authorization/database-administration/#access-control-database-administration-constraints[`SHOW CONSTRAINTS` privilege].
====

The simple version of the command allows for a `WHERE` clause and will give back the default set of output columns:

[source, syntax, role="noheader", indent=0]
----
SHOW [
      ALL
     |NODE UNIQUE[NESS]
     |REL[ATIONSHIP] UNIQUE[NESS]
     |UNIQUE[NESS]
     |NODE [PROPERTY] EXIST[ENCE]
     |REL[ATIONSHIP] [PROPERTY] EXIST[ENCE]
     |[PROPERTY] EXIST[ENCE]
     |NODE PROPERTY TYPE
     |REL[ATIONSHIP] PROPERTY TYPE
     |PROPERTY TYPE
     |NODE KEY
     |REL[ATIONSHIP] KEY
     |KEY
] CONSTRAINT[S]
  [WHERE expression]
----

To get the full set of output columns, a yield clause is needed:

[source, syntax, role="noheader", indent=0]
----
SHOW [
      ALL
     |NODE UNIQUE[NESS]
     |REL[ATIONSHIP] UNIQUE[NESS]
     |UNIQUE[NESS]
     |NODE [PROPERTY] EXIST[ENCE]
     |REL[ATIONSHIP] [PROPERTY] EXIST[ENCE]
     |[PROPERTY] EXIST[ENCE]
     |NODE PROPERTY TYPE
     |REL[ATIONSHIP] PROPERTY TYPE
     |PROPERTY TYPE
     |NODE KEY
     |REL[ATIONSHIP] KEY
     |KEY
] CONSTRAINT[S]
YIELD { * | field[, ...] } [ORDER BY field[, ...]] [SKIP n] [LIMIT n]
  [WHERE expression]
  [RETURN field[, ...] [ORDER BY field[, ...]] [SKIP n] [LIMIT n]]
----


The type filtering keywords filters the returned constraints on constraint type:

[[constraints-syntax-list-type-filter]]
.Type filters
[options="header", width="100%", cols="4m,6a"]
|===
| Filter | Description

|ALL
| Returns all constraints, no filtering on constraint type.
This is the default if none is given.

|NODE UNIQUE[NESS]
| Returns the node property uniqueness constraints.


|REL[ATIONSHIP] UNIQUE[NESS]
| Returns the relationship property uniqueness constraints.


|UNIQUE[NESS]
| Returns all property uniqueness constraints, for both nodes and relationships.
label:new[Allowing `UNIQUENESS` was introduced in 5.3]

|NODE [PROPERTY] EXIST[ENCE]
| Returns the node property existence constraints.

|REL[ATIONSHIP] [PROPERTY] EXIST[ENCE]
| Returns the relationship property existence constraints.

|[PROPERTY] EXIST[ENCE]
| Returns all property existence constraints, for both nodes and relationships.

|NODE PROPERTY TYPE
| Returns the node property type constraints.


|REL[ATIONSHIP] PROPERTY TYPE
| Returns the relationship property type constraints.


|PROPERTY TYPE
| Returns all property type constraints, for both nodes and relationships.


|NODE KEY
| Returns the node key constraints.

|REL[ATIONSHIP] KEY
| Returns the relationship key constraints.


|KEY
| Returns all node and relationship key constraints.


|===


The returned columns from the show command is:

.Listing constraints output
[options="header", width="100%", cols="4m,6a,2m"]
|===
| Column | Description | Type

| id
| The id of the constraint. label:default-output[]
| INTEGER

| name
| Name of the constraint (explicitly set by the user or automatically assigned). label:default-output[]
| STRING

| type
| The ConstraintType of this constraint (`UNIQUENESS` (node uniqueness), `RELATIONSHIP_UNIQUENESS`, `NODE_PROPERTY_EXISTENCE`, `RELATIONSHIP_PROPERTY_EXISTENCE`, `NODE_PROPERTY_TYPE`, `RELATIONSHIP_PROPERTY_TYPE`, `NODE_KEY`, or `RELATIONSHIP_KEY`). label:default-output[]
| STRING

| entityType
| Type of entities this constraint represents (nodes or relationship). label:default-output[]
| STRING

| labelsOrTypes
| The labels or relationship types of this constraint. label:default-output[]
| LIST<STRING>

| properties
| The properties of this constraint. label:default-output[]
| LIST<STRING>

| ownedIndex
| The name of the index associated with the constraint or `null`, in case no index is associated with it. label:default-output[]
| STRING

| propertyType
| The property type the property is restricted to for property type constraints, or `null` for the other constraints.
label:default-output[] 
| STRING

| options
| The options passed to `CREATE` command, for the index associated to the constraint, or `null` if no index is associated with the constraint.
| MAP

| createStatement
| Statement used to create the constraint.
| STRING

|===

