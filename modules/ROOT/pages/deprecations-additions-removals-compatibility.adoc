[[cypher-deprecations-additions-removals-compatibility]]
= Deprecations, additions, and compatibility
:description: all of the features that have been removed, deprecated, added, or extended in different Cypher versions.
:test-skip: true  // all deprecations would fail.

// Order of subsections:
//  1. Removed features
//  2. Deprecated features
//  3. Restricted features
//  4. Updated features
//  5. New features

Cypher is a language that is constantly evolving.
New features are added to the language continuously, and occasionally, some features become deprecated and are subsequently removed.

This section lists all of the features that have been removed, deprecated, added, or extended in different Cypher versions.
Replacement syntax for deprecated and removed features are also indicated.

[[cypher-deprecations-additions-removals-5.26]]
== Neo4j 5.26

=== Deprecated features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:functionality[]
label:deprecated[]
[source, cypher, role="noheader"]
----
CALL db.schema.nodeTypeProperties() YIELD propertyTypes RETURN propertyTypes;
CALL db.schema.relTypeProperties() YIELD propertyTypes RETURN propertyTypes;
----
a|
The column `propertyTypes` currently returned by the procedures link:{neo4j-docs-base-uri}/operations-manual/{page-version}/procedures/#procedure_db_schema_nodetypeproperties[`db.schema.nodeTypeProperties()`] and link:{neo4j-docs-base-uri}/operations-manual/{page-version}/procedures/#procedure_db_schema_reltypeproperties[`db.schema.relTypeProperties()`] produces a list of strings representing the potential Java types for a given property.
In an upcoming major release of Neo4j, this will be updated to represent the possible Cypher types for that property instead.
For all available Cypher types, see the section on xref::values-and-types/property-structural-constructed.adoc#types-synonyms[types and their synonyms].
|===

[[cypher-deprecations-additions-removals-5.25]]
== Neo4j 5.25

=== Deprecated features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:functionality[]
label:deprecated[]
[source, cypher, role="noheader"]
----
CREATE DATABASE db OPTIONS { existingDataSeedInstance: ... }
----
| The `CREATE DATABASE` option `existingDataSeedInstance` has been deprecated and replaced with the option link:{neo4j-docs-base-uri}/operations-manual/{page-version}/database-administration/standard-databases/create-database/#manage-databases-create-database-options[`existingDataSeedServer`]. The functionality is unchanged.
|===

=== Updated features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:functionality[]
label:updated[]
[source, cypher, role="noheader"]
----
CREATE (n:Label {property: 'name'}), 
()-[r:REL_TYPE]->()
----
| Neo4j's link:{neo4j-docs-base-uri}/operations-manual/{page-version}/database-internals/store-formats/#store-format-overview[block format] now implements xref:appendix/gql-conformance/index.adoc[GQL's] limit on the maximum length of identifiers.

The maximum limit is set to 16,383 characters in an identifier.
This means that node labels, relationship types, and property keys cannot include more than 16,383 characters.
|===

=== New features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
CREATE DATABASE db OPTIONS { existingDataSeedServer: ... }
----
| The option link:{neo4j-docs-base-uri}/operations-manual/{page-version}/database-administration/standard-databases/create-database/#manage-databases-create-database-options[`existingDataSeedServer`] has been added to `CREATE DATABASE`. The functionality is the same as the deprecated option `existingDataSeedServer`, which this replaces.
|===

[[cypher-deprecations-additions-removals-5.24]]
== Neo4j 5.24

=== New features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
MATCH (t:Team)
OPTIONAL CALL (t) {
  MATCH (p:Player)-[:PLAYS_FOR]->(t)
  RETURN collect(p) as players
}
RETURN t AS team, players
----

[source, cypher, role="noheader"]
----
OPTIONAL CALL db.labels() YIELD label 
RETURN label
----

| Introduced `OPTIONAL CALL` for optionally executing a xref:clauses/call.adoc#optional-call[procedure] or xref:subqueries/call-subquery.adoc#optional-call[subquery] `CALL`.
Similar to xref:clauses/optional-match.adoc[`OPTIONAL MATCH`], any empty rows produced by the `OPTIONAL CALL` will return `null` and not affect the remainder of the procedure or subquery evaluation.

a|
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
MATCH (n)
RETURN n.name AS names OFFSET 2
----
a|
Introduced `OFFSET`, a GQL conformant synonym to `SKIP`.

See xref::clauses/skip.adoc#offset-synonym[`OFFSET` as a synonym for `SKIP`] for details.

a|
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
MATCH (n)
ORDER BY n.name DESC
OFFSET 3
LIMIT 2
RETURN collect(n.name) AS names
----
a|
Introduced GQL conformant standalone xref::clauses/order-by.adoc#order-standalone-clause[`ORDER BY`], xref::clauses/skip.adoc#skip-standalone-clause[`SKIP`/`OFFSET`], and xref::clauses/limit.adoc#limit-standalone-clause[`LIMIT`] clauses.

a|
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
SET n:$(label)
REMOVE n:$(label)
----
| Added the ability to dynamically reference labels in xref:clauses/set.adoc#set-set-a-dynamic-label-on-a-node[SET] and xref:clauses/remove.adoc#remove-remove-a-label-dynamically-from-a-node[REMOVE] clauses.

a|
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
SET n[$prop] = "hello world"
REMOVE n[$prop]
----
| Added the ability to dynamically reference properties in xref:clauses/set.adoc#set-dynamically-a-property[SET] and xref:clauses/remove.adoc#remove-remove-a-property-dynamically[REMOVE] clauses.

a|
label:functionality[]
label:new[]
[source, cypher, role=noheader]
----
DROP [COMPOSITE] DATABASE ... [RESTRICT \| CASCADE ALIAS[ES]]
----

| Added the ability to drop database aliases while deleting a database.
This will affect local database aliases targeting the database and constituent database aliases belonging to the composite database.
For more information, see link:{neo4j-docs-base-uri}/operations-manual/{page-version}/database-administration/standard-databases/delete-databases/#delete-databases-with-aliases[Delete a database with local database aliases targeting it] and link:{neo4j-docs-base-uri}/operations-manual/{page-version}/database-administration/composite-databases/delete-composite-databases/#composite-databases-delete-with-aliases[Delete a composite database with constituent database aliases].

a|
label:functionality[]
label:new[]
[source, cypher, role=noheader]
----
LOAD CSV FROM 'azb://azb-account/azb-container/artists.csv' AS row
MERGE (a:Artist {name: row[1], year: toInteger(row[2])})
RETURN a.name, a.year
----

| Extension of the xref:clauses/load-csv.adoc#azure-cloud-storage[LOAD CSV] clause to allow loading CSV files from Azure Cloud Storage URIs.

a|
label:functionality[]
label:new[]
[source, cypher, role=noheader]
----
CREATE USER bob
SET AUTH 'externalProviderName' {
  SET ID 'userIdForExternalProvider'
}
SET AUTH 'native' {
  SET PASSWORD 'password'
  SET PASSWORD CHANGE REQUIRED
}
----
| Added the ability set which link:{neo4j-docs-base-uri}/operations-manual/{page-version}/authentication-authorization/auth-providers[auth providers] apply to a user (Enterprise Edition).

Administration of the native (username / password) auth via the new syntax is also now supported (Community Edition).

a|
label:functionality[]
label:new[]
[source, cypher, role=noheader]
----
ALTER USER bob
REMOVE AUTH 'native'
SET AUTH 'externalProviderName' {
  SET ID 'userIdForExternalProvider'
}
----
| Added the ability add and remove user link:{neo4j-docs-base-uri}/operations-manual/{page-version}/authentication-authorization/auth-providers[auth providers] via the `ALTER USER` command.

Setting the native (username / password) auth provider via this new syntax is also supported (Community Edition), but removing any auth provider or setting a non-native auth provider is only supported in Enterprise Edition.


a|
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
SHOW USERS WITH AUTH
----
a|
New support for `WITH AUTH` to allow display users' auth providers with a separate row per user per auth provider.

a|
label:functionality[]
label:new[] +
[source, cypher, role="noheader"]
----
SET AUTH
----
a|
New privilege that allows a user to modify user link:{neo4j-docs-base-uri}/operations-manual/{page-version}/authentication-authorization/auth-providers[auth providers].
This is a sub-privilege of the `ALTER USER` privilege.
Like all `GRANT`/`DENY` commands this is only available in Enterprise Edition.

|===

[[cypher-deprecations-additions-removals-5.23]]
== Neo4j 5.23

=== Deprecated features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:functionality[]
label:deprecated[]
[source, cypher, role="noheader"]
----
UNWIND [0, 1, 2] AS x
CALL {
  WITH x
  RETURN x * 10 AS y
}
RETURN x, y
----

| Using the xref:subqueries/call-subquery.adoc#importing-with[`WITH` clause to import variables] to `CALL` subqueries is deprecated, and replaced with a xref:subqueries/call-subquery.adoc#variable-scope-clause[variable scope clause].
It is also deprecated to use naked subqueries without a variable scope clause.
|===

=== Updated features


[cols="2", options="header"]
|===
| Feature
| Details

a|
label:functionality[]
label:updated[]
[source, cypher, role="noheader"]
----
RETURN datetime.statement() IS :: TIMESTAMP WITH TIME ZONE
----
a|
Introduced new GQL conformant aliases to duration types: `TIMESTAMP WITHOUT TIME ZONE` (alias to `LOCAL DATETIME`), `TIME WITHOUT TIME ZONE` (alias to `LOCAL TIME`), `TIMESTAMP WITH TIME ZONE` (alias to `ZONED DATETIME`), and `TIME WITH TIME ZONE` (alias to `ZONED TIME`).

See xref::values-and-types/property-structural-constructed.adoc#types-synonyms[types and their synonyms] for more.
|===

=== New features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
UNWIND [0, 1, 2] AS x
CALL (x) {
   RETURN x * 10 AS y
}
RETURN x, y
----

| Introduced a new xref:subqueries/call-subquery.adoc#variable-scope-clause[variable scope clause] to import variables in `CALL` subqueries.

a|
label:functionality[]
label:new[]
[source, cypher, role=noheader]
----
CREATE VECTOR INDEX moviePlots IF NOT EXISTS
FOR (m:Movie)
ON m.embedding
OPTIONS {indexConfig: {
`vector.quantization.enabled`: true
`vector.hnsw.m`: 16,
`vector.hnsw.ef_construction`: 100,
}}
----

a| Introduced the following xref:indexes/semantic-indexes/vector-indexes.adoc#configuration-settings[configuration settings] for vector indexes:

* `vector.quantization.enabled`: allows for enabling quantization, which can accelerate search performance but can also slightly decrease accuracy.

* `vector.hnsw.m`: controls the maximum number of connections each node has in the index's internal graph.

* `vector.hnsw.ef_construction`: sets the number of nearest neighbors tracked during the insertion of vectors into the index's internal graph.

Additionally, as of Neo4j 5.23, it is no longer mandatory to configure the settings `vector.dimensions` and `vector.similarity_function` when creating a vector index.

|===

[[cypher-deprecations-additions-removals-5.21]]
== Neo4j 5.21

=== Updated features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:functionality[]
label:updated[]
[source, cypher, role="noheader"]
----
SHOW FUNCTIONS YIELD *
SHOW PROCEDURES YIELD *
----
a|
Introduced a `deprecatedBy` column to `SHOW FUNCTIONS` and `SHOW PROCEDURES`.
It is not returned by default in either command.

The column is a `STRING` value specifying a replacement function/procedure if the used function/procedure is deprecated. Otherwise, it returns `null`.

|===

=== New features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:functionality[]
label:new[]
[source, cypher, role=noheader]
----
GRANT READ {*} ON GRAPH * FOR (n) WHERE n.securityLevel > 3 TO regularUsers
----
[source, cypher, role=noheader]
----
GRANT TRAVERSE ON GRAPH * FOR (n:Email) WHERE n.classification IS NULL TO regularUsers
----
[source, cypher, role=noheader]
----
DENY MATCH {*} ON GRAPH * FOR (n) WHERE n.classification <> 'UNCLASSIFIED' TO regularUsers
----
| Introduction of link:{neo4j-docs-base-uri}/operations-manual/{page-version}/authentication-authorization/property-based-access-control[property-based access control] for read privileges. The ability to read, traverse and match nodes based on node property values is now supported in Enterprise Edition.

a|
label:functionality[]
label:new[]
[source, cypher, role=noheader]
----
LOAD CSV FROM 'gs://gs-bucket/artists.csv' AS row
MERGE (a:Artist {name: row[1], year: toInteger(row[2])})
RETURN a.name, a.year
----
| Extension of the xref:clauses/load-csv.adoc#google-cloud-storage[LOAD CSV] clause to allow loading CSV files from Google Cloud Storage URIs.

a|
label:functionality[]
label:new[]
[source, cypher, role=noheader]
----
CYPHER inferSchemaParts=most_selective_label
----

| Introduction of xref:planning-and-tuning/query-tuning.adoc#cypher-infer-schema-parts[`inferSchemaParts`], a new Cypher query option that controls the extent to which the Cypher planner will infer predicates.

a|
label:functionality[]
label:new[]
[source, cypher, role=noheader]
----
RETURN upper('abc'), lower('ABC')
----
| Introduction of a xref:functions/string.adoc#functions-lower[lower()] and xref:functions/string.adoc#functions-upper[upper()] function.
These are aliases of the xref:functions/string.adoc#functions-tolower[toLower()] and xref:functions/string.adoc#functions-toupper[toUpper()] functions.

a|
label:functionality[]
label:new[]
[source, cypher, role=noheader]
----
UNWIND range(1, 10) as i
  CALL {
    WITH i
    CREATE (n:N { i: i })
} IN 3 CONCURRENT TRANSACTIONS OF 2 ROWS
----
| Introduced xref:subqueries/subqueries-in-transactions.adoc#concurrent-transactions[CALL { ... } IN CONCURRENT TRANSACTIONS], which uses multiple CPU processors simultaneously to execute batched inner transactions concurrently.

a|
label:functionality[]
label:new[]
[source, cypher, role=noheader]
----
MATCH SHORTEST 1 (:A)-[:R]->{0,10}(:B)
----

[source, cypher, role=noheader]
----
MATCH p = ANY 2 (:A)-[:R]->{0,10}(:B)
----

[source, cypher, role=noheader]
----
MATCH ALL SHORTEST (:A)-[:R]->{0,10}(:B)
----

[source, cypher, role=noheader]
----
MATCH SHORTEST 2 GROUPS (:A)-[:R]->{0,10}(:B)
----

a| Introduced new graph pattern matching keywords to find variations of the xref:patterns/shortest-paths.adoc[shortest paths] between nodes.

a| 
label:functionality[]
label:new[]

New operators:

* xref:planning-and-tuning/operators/operators-detail.adoc#query-plan-stateful-shortest-path-all[`StatefulShortestPath(All)`]
* xref:planning-and-tuning/operators/operators-detail.adoc#query-plan-stateful-shortest-path-into[`StatefulShortestPath(Into)`]

a| Introduced new operators to solve xref:patterns/shortest-paths.adoc[`SHORTEST`] queries.
|===

[[cypher-deprecations-additions-removals-5.20]]
== Neo4j 5.20

=== Deprecated features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:functionality[]
label:deprecated[]
[source, cypher, role="noheader"]
----
MERGE (a {foo:1})-[:T]->(b {foo:a.foo})
----
a|

Merging a node or relationship entity, and then referencing that entity in a property definition in the same `MERGE` clause is deprecated.
Split the `MERGE` clause into two separate clauses instead.

|===

=== New features

[cols="2", options="header"]
|===
| Feature
| Details
a|
label:syntax[]
label:functionality[]
label:new[]
[source, cypher, role=noheader]
----
RETURN trim(BOTH 'x' FROM 'xxhelloxx'),
       ltrim('xxhello', 'x'),
       rtrim('helloxx', 'x'),
       btrim('xxhelloxx', 'x')
----
| Introduced  xref:functions/string.adoc#functions-btrim[btrim()] function, which returns the given `STRING` with leading and trailing `trimCharacterString` characters removed.
Also extended the xref:functions/string.adoc#functions-trim[trim()], xref:functions/string.adoc#functions-ltrim[ltrim()], and xref:functions/string.adoc#functions-rtrim[rtrim()] functions to accept alternative trim character strings.

|===

[[cypher-deprecations-additions-removals-5.19]]
== Neo4j 5.19

=== New features

[cols="2", options="header"]
|===
| Feature
| Details
a|
label:functionality[]
label:new[]
[source, cypher, role=noheader]
----
RETURN "Hello" \|\| " " \|\| "World";

RETURN [1, 2] \|\| [3, 4, 5];
----
| Added a new `STRING` and `LIST` xref:syntax/operators.adoc[concatenation operator].

a|
label:functionality[]
label:new[]
[source, cypher, role=noheader]
----
FINISH
----
| New xref:clauses/finish.adoc[FINISH] clause, which can be optionally used to define a query that returns no result.

a|
label:functionality[]
label:new[]
[source, cypher, role=noheader]
----
RETURN 1 AS a
UNION DISTINCT
RETURN 1 AS a
----
| The keyword `DISTINCT` can now be added after a xref:clauses/union.adoc#union-distinct[UNION] as the explicit form of a `UNION` with duplicate removal.

a|
label:functionality[]
label:new[]
[source, cypher, role=noheader]
----
LOAD CSV FROM 's3://artists.csv' AS row
MERGE (a:Artist {name: row[1], year: toInteger(row[2])})
RETURN a.name, a.year
----
| Extension of the xref:clauses/load-csv.adoc#aws-s3[LOAD CSV] clause to allow loading CSV files from AWS S3 URIs.

a|
label:functionality[]
label:new[]

* `"textembedding-gecko@002"`
* `"textembedding-gecko@003"`
* `"textembedding-gecko-multilingual@001"`

| Added support for additional xref:genai-integrations.adoc#ai-providers[Vertex AI] vector encoding models.
Also added support for Vertex AI `taskType` and `title` embedding parameters.
|===

[[cypher-deprecations-additions-removals-5.18]]
== Neo4j 5.18

=== New features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:functionality[]
label:new[]
[source, cypher, role=noheader]
----
INSERT
----
| Added a new keyword xref:clauses/create.adoc#insert-as-synonym-of-create[INSERT], which can be used as a synonym to `CREATE` for creating nodes and relationships.

a|
label:functionality[]
label:new[]

[source, cypher, role=noheader]
----
MATCH (n)
RETURN CASE n.prop
        WHEN IS NULL THEN "Null"
        WHEN < 0 THEN "Negative"
        WHEN 2, 4, 6, 8 THEN "Even"
        ELSE "Odd"
        END
----

| Extension of the xref::queries/case.adoc#case-simple[simple `CASE` expression], allowing multiple matching values to be comma-separated in the same `WHEN` statement.
The simple `CASE` uses an implied equals (`=`) comparator, and this extension additionally allows other comparison predicates to be explicitly specified before the matching value
in an xref::queries/case.adoc#case-extended-simple[extended version of the simple `CASE`].

a|
label:functionality[]
label:new[]

[source, cypher, role=noheader]
----
CREATE VECTOR INDEX [index_name] [IF NOT EXISTS]
FOR ()-[r:REL_TYPE]-() ON (r.property)
OPTIONS {indexConfig: {
 `vector.dimensions`: $dimension,
 `vector.similarity_function`: $similarityFunction
}}
----

| Added command to create relationship vector indexes.
The index configuration settings `vector.dimensions` and `vector.similarity_function` are mandatory when using this command.
The command allows for the `IF NOT EXISTS` flag to skip index creation should the index already exist.

a|
label:functionality[]
label:new[]

[source, cypher, role=noheader]
----
RETURN vector.similarity.euclidean(a, b)
RETURN vector.similarity.cosine(a, b)
----

| Introduction of xref::functions/vector.adoc[vector similarity functions].
These functions return a `FLOAT` representing the similarity of vectors `a` and `b`.


|===


[[cypher-deprecations-additions-removals-5.17]]
== Neo4j 5.17

=== Updated features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:functionality[]
label:updated[]
[source, cypher, role=noheader]
----
CREATE [index_type] INDEX [index_name] IF NOT EXISTS FOR ...
----
|
When attempting to create an index using `IF NOT EXISTS` with either the same name or same index type and schema, or both, as an existing index the command now returns a notification showing the existing index which blocks the creation.

a|
label:functionality[]
label:updated[]
[source, cypher, role=noheader]
----
CREATE CONSTRAINT [constraint_name] IF NOT EXISTS FOR ...
----
|
When attempting to create a constraint using `IF NOT EXISTS` with either the same name or same constraint type and schema (and property type for property type constraints), or both, as an existing constraint the command now returns a notification showing the existing constraint which blocks the creation.

a|
label:functionality[]
label:updated[]
[source, cypher, role=noheader]
----
DROP CONSTRAINT constraint_name IF EXISTS
----
| When attempting to drop a non-existing index using `IF EXISTS` the command will now return a notification about the index not existing.

a|
label:functionality[]
label:updated[]
[source, cypher, role=noheader]
----
DROP INDEX index_name IF EXISTS
----
| When attempting to drop a non-existing constraint using `IF EXISTS` the command will now return a notification about the constraint not existing.

|===

=== New features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:functionality[]
label:new[]

[source, cypher, role=noheader]
----
RETURN normalize("string", NFC)
----

| Introduction of a xref::functions/string.adoc#functions-normalize[normalize()] function.
This function normalizes a `STRING` according to the specified normalization form, which can be of type `NFC`, `NFD`, `NFKC`, or `NFKD`.

a|
label:functionality[]
label:new[]

[source, cypher, role=noheader]
----
IS [NOT] [NFC \| NFD \| NFKC \| NFKD] NORMALIZED
----

[source, cypher, role=noheader]
----
RETURN "string" IS NORMALIZED
----

| Introduction of an xref::syntax/operators.adoc#match-string-is-normalized[IS NORMALIZED] operator.
The operator can be used to check if a `STRING` is normalized according to the specified normalization form, which can be of type `NFC`, `NFD`, `NFKC`, or `NFKD`.

a|
label:functionality[]
label:new[]

New operators:

* xref:planning-and-tuning/operators/operators-detail.adoc#query-plan-partitioned-all-nodes-scan[`PartitionedAllNodesScan`]
* xref:planning-and-tuning/operators/operators-detail.adoc#query-plan-partitioned-directed-all-relationships-scan[`PartitionedDirectedAllRelationshipsScan`]
* xref::planning-and-tuning/operators/operators-detail.adoc#query-plan-partitioned-directed-relationship-index-scan[`PartitionedDirectedRelationshipIndexScan`]
* xref::planning-and-tuning/operators/operators-detail.adoc#query-plan-partitioned-directed-relationship-index-seek[`PartitionedDirectedRelationshipIndexSeek`]
* xref::planning-and-tuning/operators/operators-detail.adoc#query-plan-partitioned-directed-relationship-index-seek-by-range[`PartitionedDirectedRelationshipIndexSeekByRange`]
* xref::planning-and-tuning/operators/operators-detail.adoc#query-plan-partitioned-directed-union-relationship-types-scan[`PartitionedDirectedUnionRelationshipTypesScan`]
* xref::planning-and-tuning/operators/operators-detail.adoc#query-plan-partitioned-node-by-label-scan[`PartitionedNodeByLabelScan`]
* xref::planning-and-tuning/operators/operators-detail.adoc#query-plan-partitioned-node-index-scan[`PartitionedNodeIndexScan`]
* xref::planning-and-tuning/operators/operators-detail.adoc#query-plan-partitioned-node-index-seek[`PartitionedNodeIndexSeek`]
* xref:planning-and-tuning/operators/operators-detail.adoc#query-plan-partitioned-node-index-seek-by-range[`PartitionedNodeIndexSeekByRange`]
* xref::planning-and-tuning/operators/operators-detail.adoc#query-plan-partitioned-undirected-all-relationships-scan[`PartitionedUndirectedAllRelationshipsScan`]
* xref::planning-and-tuning/operators/operators-detail.adoc#query-plan-partitioned-undirected-relationship-index-scan[`PartitionedUndirectedRelationshipIndexScan`]
* xref::planning-and-tuning/operators/operators-detail.adoc#query-plan-partitioned-undirected-relationship-index-seek[`PartitionedUndirectedRelationshipIndexSeek`]
* xref::planning-and-tuning/operators/operators-detail.adoc#query-plan-partitioned-undirected-relationship-index-seek-by-range[`PartitionedUndirectedRelationshipIndexSeekByRange`]
* xref::planning-and-tuning/operators/operators-detail.adoc#query-plan-partitioned-undirected-relationship-type-scan[`PartitionedUndirectedRelationshipTypeScan`]
*  xref::planning-and-tuning/operators/operators-detail.adoc#query-plan-partitioned-undirected-union-relationship-types-scan[`PartitionedUndirectedUnionRelationshipTypesScan`]
* xref::planning-and-tuning/operators/operators-detail.adoc#query-plan-partitioned-union-node-by-labels-scan[`PartitionedUnionNodeByLabelsScan`]
* xref::planning-and-tuning/operators/operators-detail.adoc#query-plan-partitioned-unwind[`PartitionedUnwind`]

| Introduction of partitioned operators used by the xref:planning-and-tuning/runtimes/concepts.adoc#runtimes-parallel-runtime[parallel runtime].
These operators segment the data and operate on each segment in parallel

|===


[[cypher-deprecations-additions-removals-5.16]]
== Neo4j 5.16

=== Updated features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:functionality[]
label:updated[]
[source, cypher, role=noheader]
----
CREATE [index_type] INDEX $name [IF NOT EXISTS] FOR ...

DROP INDEX $name [IF EXISTS]
----
| Added the ability to use parameters for the index name in the `CREATE` and `DROP` commands.

a|
label:functionality[]
label:updated[]
[source, cypher, role=noheader]
----
CREATE CONSTRAINT $name [IF NOT EXISTS] FOR ...

DROP CONSTRAINT $name [IF EXISTS]
----
| Added the ability to use parameters for the constraint name in the `CREATE` and `DROP` commands.

|===

=== New features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:functionality[]
label:new[]
[source, cypher, role=noheader]
----
GRANT LOAD ON CIDR "127.0.0.1/32" TO role
DENY LOAD ON CIDR "::1/128" TO role
----
| Added the ability to grant or deny `LOAD` privilege on a CIDR range.
For more information, see the link:{neo4j-docs-base-uri}/operations-manual/{page-version}/authentication-authorization/load-privileges/#access-control-load-cidr[Operations Manual -> The CIDR privilege].

|===


[[cypher-deprecations-additions-removals-5.15]]
== Neo4j 5.15

=== Deprecated features
[cols="2", options="header"]
|===
| Feature
| Details
a|
label:functionality[]
label:deprecated[]
[source, cypher, role="noheader"]
----
RETURN 1 as my\u0085identifier
----
a|
The Unicode character \`\u0085` is deprecated for unescaped identifiers and will be considered as a whitespace character in the future.
To continue using it, escape the identifier by adding backticks around the identifier.
This applies to all unescaped identifiers in Cypher, such as label expressions, properties, variable names or parameters.
In the given example, the quoted identifier would be \`myï¿½identifier`.

a|
label:functionality[]
label:deprecated[]
[source, cypher, role="noheader"]
----
RETURN 1 as my$Identifier
----
a|
The character with the Unicode representation \`\u0024` is deprecated for unescaped identifiers and will not be supported in the future. To continue using it, escape the identifier by adding backticks around the identifier.
This applies to all unescaped identifiers in Cypher, such as label expressions, properties, variable names or parameters. In the given example, the quoted identifier would be \`my$identifier`.

The following Unicode Characters are deprecated in identifiers:
'\u0000', '\u0001', '\u0002', '\u0003', '\u0004', '\u0005', '\u0006', '\u0007',
'\u0008', '\u000E', '\u000F', '\u0010', '\u0011', '\u0012', '\u0013', '\u0014',
'\u0015', '\u0016', '\u0017', '\u0018', '\u0019', '\u001A', '\u001B', '\u007F',
'\u0080', '\u0081', '\u0082', '\u0083', '\u0084', '\u0086', '\u0087', '\u0088',
'\u0089', '\u008A', '\u008B', '\u008C', '\u008D', '\u008E', '\u008F', '\u0090',
'\u0091', '\u0092', '\u0093', '\u0094', '\u0095', '\u0096', '\u0097', '\u0098',
'\u0099', '\u009A', '\u009B', '\u009C', '\u009D', '\u009E', '\u009F', '\u0024',
'\u00A2', '\u00A3', '\u00A4', '\u00A5', '\u00AD', '\u0600', '\u0601', '\u0602',
'\u0603', '\u0604', '\u0605', '\u061C', '\u06DD', '\u070F', '\u08E2', '\u180E',
'\u200B', '\u200C', '\u200D', '\u200E', '\u200F', '\u202A', '\u202B', '\u202C',
'\u202D', '\u202E', '\u2060', '\u2061', '\u2062', '\u2063', '\u2064', '\u2066',
'\u2067', '\u2068', '\u2069', '\u206A', '\u206B', '\u206C', '\u206D', '\u206E',
'\u206F', '\u2E2F', '\uFEFF', '\uFFF9', '\uFFFA', '\uFFFB'

|===

=== Updated features

[cols="2", options="header"]
|===
| Feature
| Details
a|
label:functionality[]
label:updated[]

[source, cypher, role="noheader"]
----
SHOW VECTOR INDEXES
----

| Extended xref:indexes/search-performance-indexes/managing-indexes.adoc#indexes-list-indexes[`SHOW INDEXES`] with easy filtering for vector indexes.
This is equivalent to `SHOW INDEXES WHERE type = 'VECTOR'`.

a|
label:functionality[]
label:updated[]

[source, cypher, role="noheader"]
----
MATCH (n:Label) WHERE $param IS :: STRING NOT NULL AND n.prop = $param
----

| `IS :: STRING NOT NULL` is now an xref:indexes/search-performance-indexes/using-indexes.adoc#text-indexes-type-predicate-expressions[index-compatible predicate].

|===

=== New features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:functionality[]
label:new[]

[source, cypher, role=noheader]
----
MATCH (n)
RETURN count(ALL n.prop)
----

| Added a new keyword xref::functions/aggregating.adoc#counting_with_and_without_duplicates[ALL], explicitly defining that the aggregate function is not `DISTINCT`.
This is a mirror of the already existing keyword `DISTINCT` for functions.

a|
label:functionality[]
label:new[]

[source, cypher, role=noheader]
----
CREATE VECTOR INDEX [index_name] [IF NOT EXISTS]
FOR (n: Label) ON (n.property)
OPTIONS {indexConfig: {
 `vector.dimensions`: $dimension,
 `vector.similarity_function`: $similarityFunction
}}
----

| Added command to create node vector indexes, replacing the `db.index.vector.createNodeIndex` procedure.
The index configuration settings `vector.dimensions` and `vector.similarity_function` are mandatory when using this command.
The command allows for the `IF NOT EXISTS` flag to skip index creation should the index already exist.

|===


[[cypher-deprecations-additions-removals-5.14]]
== Neo4j 5.14

=== Updated features

[cols="2", options="header"]
|===
| Feature
| Details
a|
label:functionality[]
label:updated[]

[source, cypher, role="noheader"]
----
IS :: INTEGER!
----

| Extended xref::values-and-types/property-structural-constructed.adoc#types-synonyms[type] syntax to allow an exclamation mark `!` as a synonym for `NOT NULL`.

|===

=== New features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:functionality[]
label:new[]

[source, cypher, role=noheader]
----
RETURN nullIf(v1, v2)
----

| Introduction of a xref::functions/scalar.adoc#functions-nullIf[nullIf()] function.
This function returns null if the two given parameters are equivalent, otherwise returns the value of the first parameter.

a|
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
MATCH (n) NODETACH DELETE n
----
a|
Added a new keyword xref:clauses/delete.adoc#delete-nodetach[NODETACH], explicitly defining that relationships will not be detached and deleted.
This is a mirror of the already existing keyword `DETACH`.
|===

[[cypher-deprecations-additions-removals-5.13]]
== Neo4j 5.13

=== Updated features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:functionality[]
label:updated[]
[source, cypher, role="noheader"]
----
SHOW FUNCTIONS YIELD *
SHOW PROCEDURES YIELD *
----
a|
Updated the `signatures` column in `SHOW FUNCTIONS` and `SHOW PROCEDURES`.

Procedure signatures now follow the pattern:
`"procedureName(param1 :: TYPE, param2 :: TYPE, .., paramN :: TYPE) :: (returnParam1 :: TYPE, returnParam2, .., returnParamN :: TYPE)"`

The signature for procedures with no return columns now follows the pattern:
`"procedureName(param1 :: TYPE, param2 :: TYPE, .., paramN :: TYPE)"`

Function signatures now follow the pattern:
`"functionName(param1 :: TYPE, param2 :: TYPE, .., paramN :: TYPE) :: TYPE"`

For all available Cypher types, see the section on xref::values-and-types/property-structural-constructed.adoc#types-synonyms[types and their synonyms].

|===

=== New features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:functionality[]
label:new[]
label:beta[]

[source, cypher, role=noheader]
----
CALL cdc.current()
CALL cdc.earliest()
CALL cdc.query(from, selectors)
----

| Introduction of the Change Data Capture (CDC) feature.
For details, see link:{neo4j-docs-base-uri}/cdc/{page-version}/[Change Data Capture].

a|
label:functionality[]
label:new[]

[source, cypher, role=noheader]
----
RETURN valueType(expr)
----

| Introduction of a xref::functions/scalar.adoc#functions-valueType[valueType()] function.
This function returns a `STRING` representation of the most precise value xref::values-and-types/property-structural-constructed.adoc#types-synonyms[type] that the given expression evaluates to.

a|
label:functionality[]
label:new[]

[source, cypher, role=noheader]
----
RETURN char_length(expr)
----

| Introduction of a xref::functions/scalar.adoc#functions-char_length[char_length()] function.
This function returns the number of Unicode characters in a `STRING`. It is an alias of the xref::functions/scalar.adoc#functions-size[`size()`] function.

a|
label:functionality[]
label:new[]

[source, cypher, role=noheader]
----
RETURN character_length(expr)
----

| Introduction of a xref::functions/scalar.adoc#functions-character_length[character_length()] function.
This function returns the number of Unicode characters in a `STRING`. It is an alias of the xref::functions/scalar.adoc#functions-size[`size()`] function.

a|
label:functionality[]
label:new[]

New privilege:
[source, cypher, role=noheader]
----
GRANT LOAD ON ALL DATA TO `role`
----

| New privilege that controls a user's ability to load data.
Unlike other privileges, these are not granted, denied, or revoked on graphs, databases, or the DBMS, but instead on `ALL DATA`.

a|
label:functionality[]
label:new[]

[source, cypher, role=noheader]
----
USE graph.byElementId(elementId :: STRING)
----

| New graph function, xref:functions/graph.adoc#functions-graph-by-elementid[graph.byElementId()], that resolves the constituent graph to which a given element id belongs.

a|
label:functionality[]
label:new[]

----
CYPHER runtime = parallel
----

|
Introduction of the xref:planning-and-tuning/runtimes/concepts.adoc#runtimes-parallel-runtime[parallel runtime].
This runtime is designed for analytical, graph-global read queries run on machines with several available CPUs.
|===


[[cypher-deprecations-additions-removals-5.12]]
== Neo4j 5.12

=== New features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
db.nameFromElementId(elementId :: STRING) :: STRING
----

a| New xref:functions/database.adoc[database function] to return database names from element ids.

|===


[[cypher-deprecations-additions-removals-5.11]]
== Neo4j 5.11

===  Updated features



[cols="2", options="header"]
|===
| Feature
| Details

a|
label:functionality[]
label:updated[]
[source, cypher, role="noheader"]
----
SHOW ALIASES
----
a|
Introduced a new column `composite` to `SHOW ALIASES`.
This column is returned by default.

The column returns the name of the composite database that the alias belongs to, or `null` if the alias does not belong to a composite database.


a|
label:functionality[]
label:updated[]
[source, cypher, role="noheader"]
----
IS [NOT] :: <TYPE>
----
a|

Extended xref:values-and-types/type-predicate.adoc[type predicate expressions].
Closed dynamic union types (`type1 \| type2 \| ...`) are now supported. For example, the following query which evaluates to true if a value is either of type `INTEGER` or `FLOAT`:

[source, cypher, role="noheader"]
----
IS :: INTEGER \| FLOAT
----

a|
label:functionality[]
label:updated[]
[source, cypher, role="noheader"]
----
CREATE CONSTRAINT name FOR (n:Label) REQUIRE n.prop IS :: <PROPERTY TYPE>

CREATE CONSTRAINT name FOR ()-[r:TYPE]-() REQUIRE r.prop IS :: <PROPERTY TYPE>
----
a|

Extended xref::constraints/managing-constraints.adoc#create-property-type-constraint-union-type[node and relationship property type constraints].
Closed dynamic union types (`type1 \| type2 \| ...`) are now supported, allowing for types such as:

* `INTEGER \| FLOAT`
* `LIST<STRING NOT NULL> \| STRING`
* `ZONED DATETIME \| LOCAL DATETIME`

a|
label:functionality[]
label:updated[]
[source, cypher, role="noheader"]
----
ALTER CURRENT USER
SET PASSWORD FROM 'password1' TO 'password2'
----

a| This command now auto-commits even when executed inside an explicit transaction.

|===


[[cypher-deprecations-additions-removals-5.10]]
== Neo4j 5.10

===  Updated features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:functionality[]
label:updated[]
[source, cypher, role="noheader"]
----
IS [NOT] :: <TYPE>
----
a|

Extended xref:values-and-types/type-predicate.adoc[type predicate expressions].
The newly supported types are:

* `NOTHING`
* `NULL`
* `BOOLEAN NOT NULL`
* `STRING NOT NULL`
* `INTEGER NOT NULL`
* `FLOAT NOT NULL`
* `DATE NOT NULL`
* `LOCAL TIME NOT NULL`
* `ZONED TIME NOT NULL`
* `LOCAL DATETIME NOT NULL`
* `ZONED DATETIME NOT NULL`
* `DURATION NOT NULL`
* `POINT NOT NULL`
* `NODE`
* `NODE NOT NULL`
* `RELATIONSHIP`
* `RELATIONSHIP NOT NULL`
* `MAP`
* `MAP NOT NULL`
* `LIST<TYPE>`
* `LIST<TYPE> NOT NULL`
* `PATH`
* `PATH NOT NULL`
* `PROPERTY VALUE`
* `PROPERTY VALUE NOT NULL`
* `ANY`
* `ANY NOT NULL`

a|
label:functionality[]
label:updated[]
[source, cypher, role="noheader"]
----
CREATE CONSTRAINT name FOR (n:Label) REQUIRE n.prop IS :: <PROPERTY TYPE>

CREATE CONSTRAINT name FOR ()-[r:TYPE]-() REQUIRE r.prop IS :: <PROPERTY TYPE>
----
a|

Extended xref::constraints/managing-constraints.adoc#type-constraints-allowed-properties[node and relationship property type constraints].
The new supported types are:

* `LIST<BOOLEAN NOT NULL>`
* `LIST<STRING NOT NULL>`
* `LIST<INTEGER NOT NULL>`
* `LIST<FLOAT NOT NULL>`
* `LIST<DATE NOT NULL>`
* `LIST<LOCAL TIME NOT NULL>`
* `LIST<ZONED TIME NOT NULL>`
* `LIST<LOCAL DATETIME NOT NULL>`
* `LIST<ZONED DATETIME NOT NULL>`
* `LIST<DURATION NOT NULL>`
* `LIST<POINT NOT NULL>`

|===


[[cypher-deprecations-additions-removals-5.9]]
== Neo4j 5.9

=== Deprecated features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:functionality[]
label:deprecated[]
[source, cypher, role="noheader"]
----
CREATE (a {foo:1}), (b {foo:a.foo})
----
a|

Creating a node or relationship entity,
and then referencing that entity in a property definition in the same `CREATE` clause is deprecated.
Split the `CREATE` clause into two separate clauses instead.

|===


===  Updated features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:functionality[]
label:updated[]
[source, cypher, role="noheader"]
----
SHOW SETTINGS YIELD *
SHOW FUNCTIONS YIELD *
SHOW PROCEDURES YIELD *
----
a|
Introduced an `isDeprecated` column to `SHOW SETTINGS`, `SHOW FUNCTIONS`, and `SHOW PROCEDURES`.
It is not returned by default in either command.

The column is true if the setting/function/procedure is deprecated and false otherwise.

a|
label:functionality[]
label:updated[]
[source, cypher, role="noheader"]
----
SHOW FUNCTIONS YIELD argumentDescription
SHOW PROCEDURES YIELD argumentDescription, returnDescription
----
a|
Introduced an `isDeprecated` field to the argument and return description maps for `SHOW FUNCTIONS` and `SHOW PROCEDURES`.

The field is true if the argument/return value is deprecated and false otherwise.

a|
label:functionality[]
label:updated[]
[source, cypher, role="noheader"]
----
SHOW CONSTRAINTS
----
a|

Introduced `propertyType` column, which is returned by default.
It returns a `STRING` representation of the property type for property type constraints, and `null` for other constraints.


|===

=== New features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:functionality[]
label:new[]

[source, cypher, role=noheader]
----
MATCH ((x:A)-[:R]->(z:B WHERE z.h > x.h)){1,5}
----

| Introduction of quantified path patterns - a new method in graph pattern matching for matching paths of a variable length.
More information can be found xref::patterns/variable-length-patterns.adoc#quantified-path-patterns[here].

a|
label:functionality[]
label:new[]

New operator: `Repeat(Trail)`

a|
The `Repeat(Trail)` operator is used to solve xref::patterns/variable-length-patterns.adoc#quantified-path-patterns[quantified path patterns].
More information can be found xref:planning-and-tuning/operators/operators-detail.adoc#query-plan-repeat[here].

a|
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
IS [NOT] :: <TYPE>
----
a|

Added xref:values-and-types/type-predicate.adoc[type predicate expressions].
The available types are:

* `BOOLEAN`
* `STRING`
* `INTEGER`
* `FLOAT`
* `DATE`
* `LOCAL TIME`
* `ZONED TIME`
* `LOCAL DATETIME`
* `ZONED DATETIME`
* `DURATION`
* `POINT`

a|
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
CREATE CONSTRAINT name FOR (n:Label) REQUIRE n.prop IS :: <PROPERTY TYPE>

CREATE CONSTRAINT name FOR ()-[r:TYPE]-() REQUIRE r.prop IS :: <PROPERTY TYPE>
----
a|

Added xref::constraints/managing-constraints.adoc#create-property-type-constraints[node and relationship property type constraints].
The available property types are:

* `BOOLEAN`
* `STRING`
* `INTEGER`
* `FLOAT`
* `DATE`
* `LOCAL TIME`
* `ZONED TIME`
* `LOCAL DATETIME`
* `ZONED DATETIME`
* `DURATION`
* `POINT`

a|
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
SHOW NODE PROPERTY TYPE CONSTRAINTS

SHOW REL[ATIONSHIP] PROPERTY TYPE CONSTRAINTS

SHOW PROPERTY TYPE CONSTRAINTS
----
a|

Added filtering for the new property constraints to `SHOW CONSTRAINTS`.
Includes filtering for the node part, relationship part, or both parts.

a|
label:functionality[]
label:new[]
[source, syntax, role=noheader]
----
SHOW SUPPORTED PRIVILEGE[S]
----

a|
List supported privileges on the current server.

|===


[[cypher-deprecations-additions-removals-5.8]]
== Neo4j 5.8

===  Updated features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:functionality[]
label:updated[]
[source, cypher, role="noheader"]
----
SHOW INDEXES
----
a|
Introduced `lastRead`, `readCount`, and `trackedSince` columns.
Both `lastRead` and `readCount` are returned by default.

The `lastRead` column returns the last time the index was used for reading.
The `readCount` column returns the number of read queries that have been issued to this index.
The `trackedSince` column returns the time when usage statistics tracking started for this index.

|===

=== New features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:functionality[]
label:new[]

New operator: `AssertSameRelationship`

a|
The `AssertSameRelationship` operator is used to ensure that no relationship property uniqueness constraints are violated in the slotted and interpreted runtime.
More information can be found xref:planning-and-tuning/operators/operators-detail.adoc#query-plan-assert-same-relationship[here].

|===


[[cypher-deprecations-additions-removals-5.7]]
== Neo4j 5.7

=== Deprecated features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:functionality[]
label:deprecated[]
[source, cypher, role="noheader"]
----
CYPHER connectComponentsPlanner=greedy MATCH (a), (b) RETURN *
----

[source, cypher, role="noheader"]
----
CYPHER connectComponentsPlanner=idp MATCH (a), (b) RETURN *
----
a|

The Cypher query option `connectComponentsPlanner` is deprecated and will be removed without a replacement.
The product's default behavior of using a cost-based IDP search algorithm when combining sub-plans will be kept.

|===

===  Updated features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:functionality[]
label:updated[]
[source, cypher, role="noheader"]
----
ALTER DATABASE ... [WAIT [n [SEC[OND[S]]]]\|NOWAIT]
----
a|
New sub-clause `WAIT` for `ALTER DATABASE`.
This enables adding a waiting clause to specify a time limit in which the command must be completed and returned.

a|
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
CREATE CONSTRAINT name FOR ()-[r:TYPE]-() REQUIRE r.prop IS UNIQUE

CREATE CONSTRAINT name FOR ()-[r:TYPE]-() REQUIRE r.prop IS RELATIONSHIP KEY
----
a|

Added relationship xref:constraints/managing-constraints.adoc#create-key-constraint[key] and xref:constraints/managing-constraints.adoc#create--property-uniqueness-constraint[property uniqueness] constraints.

a|
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
SHOW NODE UNIQUE[NESS] CONSTRAINTS

SHOW REL[ATIONSHIP] UNIQUE[NESS] CONSTRAINTS

SHOW UNIQUE[NESS] CONSTRAINTS

SHOW REL[ATIONSHIP] KEY CONSTRAINTS

SHOW KEY CONSTRAINTS
----
a|

Added filtering for the new constraint types to `SHOW CONSTRAINTS`.
Includes filtering for the node part, relationship part, or both parts of each type (`NODE KEY` filtering already exists previously).

The existing `UNIQUENESS` filter will now return both node and relationship property uniqueness constraints.

|===

=== New features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:functionality[]
label:new[]
[source, syntax, role=noheader]
----
CALL {
  <inner>
} IN TRANSACTIONS [ OF <num> ROWS ]
  [ ON ERROR CONTINUE / BREAK / FAIL ]
  [ REPORT STATUS AS <v> ]
----

a|
New fine-grained control mechanism to control how an inner transaction impacts subsequent inner and/or outer transactions.

* `ON ERROR CONTINUE` - will ignore errors and continue with the execution of subsequent inner transactions when one of them fails.

* `ON ERROR BREAK` - will ignore an error and stop the execution of subsequent inner transactions.

* `ON ERROR FAIL` - will fail in case of an error.

*  `REPORT STATUS AS <v>` - reports the execution status of the inner transaction (a map value including the fields `started` `committed`, `transactionId`, and `errorMessage`). This flag is disallowed for `ON ERROR FAIL`.

|===


[[cypher-deprecations-additions-removals-5.6]]
== Neo4j 5.6

=== New features


[cols="2", options="header"]
|===
| Feature
| Details

a|
label:functionality[]
label:new[]

`server.tag`

a| New functionality to change tags at runtime via `ALTER SERVER`.
More information can be found in the link:{neo4j-docs-base-uri}/operations-manual/{page-version}/clustering/servers#alter-server-options[Operations Manual -> `ALTER SERVER` options].

a|
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
COLLECT {
    ...
}
----
a|

New expression which returns the results of a subquery collected in a list.


a|
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
SHOW SETTING[S] [setting-name[,...]]
[YIELD { * \| field[, ...] } [ORDER BY field[, ...]] [SKIP n] [LIMIT n]]
[WHERE expression]
[RETURN field[, ...] [ORDER BY field[, ...]] [SKIP n] [LIMIT n]]

----
a|

List configuration settings on the current server.

The `setting-name` is either a comma-separated list of one or more quoted `STRING` values or a single expression resolving to a `STRING` or a `LIST<STRING>``.

a|
label:functionality[]
label:new[] +
New privilege:
[source, cypher, role="noheader"]
----
SHOW SETTING[S] name-globbing[,...]
----
a|

New privilege that controls a user's access to desired configuration settings.

|===


[[cypher-deprecations-additions-removals-5.5]]
== Neo4j 5.5

=== Deprecated features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:functionality[]
label:deprecated[]
[source, cypher, role="noheader"]
----
RETURN 'val' as one, 'val' as two
UNION
RETURN 'val' as two, 'val' as one
----

[source, cypher, role="noheader"]
----
RETURN 'val' as one, 'val' as two
UNION ALL
RETURN 'val' as two, 'val' as one
----
a|

Using differently ordered return items in a `UNION [ALL]` clause is deprecated. Replaced by:

[source, cypher, role="noheader"]
----
RETURN 'val' as one, 'val' as two
UNION
RETURN 'val' as one, 'val' as two
----

[source, cypher, role="noheader"]
----
RETURN 'val' as one, 'val' as two
UNION ALL
RETURN 'val' as one, 'val' as two
----

|===

=== New features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:functionality[]
label:new[]

New operator: `IntersectionNodeByLabelsScan`

a|
The `IntersectionNodeByLabelsScan` operator fetches all nodes that have all of the provided labels from the node label index.
More information can be found xref::planning-and-tuning/operators/operators-detail.adoc#query-plan-intersection-node-by-labels-scan[here].

|===


[[cypher-deprecations-additions-removals-5.3]]
== Neo4j 5.3

=== Updated features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:functionality[]
label:updated[]
[source, cypher, role="noheader"]
----
SHOW DATABASES
----
a|
Changes to the visibility of databases hosted on offline servers.

For such databases:

* The `address` column will return `NULL`.
* The `currentStatus` column will return `unknown`.
* The `statusMessage` will return `Server is unavailable`.

a|
label:functionality[]
label:updated[]
[source, cypher, role="noheader"]
----
EXISTS {
    ...
}
----
a|

An `EXISTS` subquery now supports any non-writing query. For example, it now supports `UNION` and `CALL` clauses.


a|
label:functionality[]
label:updated[]
[source, cypher, role="noheader"]
----
COUNT {
    ...
}
----
a|

A `COUNT` subquery now supports any non-writing query. For example, it now supports `UNION` and `CALL` clauses.

a|
label:functionality[]
label:updated[]
[source, cypher, role="noheader"]
----
SHOW UNIQUE[NESS] CONSTRAINTS
----
a|
The property uniqueness constraint type filter now allow both `UNIQUE` and `UNIQUENESS` keywords.

|===

=== New features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:functionality[]
label:new[]

New operator: `NodeByElementIdSeek`

a|
The `NodeByElementIdSeek` operator reads one or more nodes by ID from the node store, specified via the function xref::functions/scalar.adoc#functions-elementid[elementId()].
More information can be found xref::planning-and-tuning/operators/operators-detail.adoc#query-plan-node-by-elementid-seek[here].

|===


[[cypher-deprecations-additions-removals-5.2]]
== Neo4j 5.2

=== Updated features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:functionality[]
label:updated[]
[source, cypher, role="noheader"]
----
CREATE COMPOSITE DATABASE name OPTIONS {}
----
a|

Creating composite databases now allows for an empty options clause.
There are no applicable option values for composite databases.

a|
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
DRYRUN REALLOCATE\|DEALLOCATE DATABASES FROM <serverId>
----

a| To preview of the result of either `REALLOCATE` or `DEALLOCATE` without executing, prepend the command with `DRYRUN`.

|===


[[cypher-deprecations-additions-removals-5.1]]
== Neo4j 5.1

=== Deprecated features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:functionality[]
label:deprecated[]
[source, cypher, role="noheader"]
----
CREATE TEXT INDEX ... OPTIONS {indexProvider: `text-1.0`}
----
a|

The text index provider `text-1.0` is deprecated and replaced by `text-2.0`.

|===

=== Updated features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:functionality[]
label:updated[]
[source, cypher, role="noheader"]
----
CREATE TEXT INDEX ... OPTIONS {indexProvider: `text-2.0`}
----
a|

A new text index provider is available, `text-2.0`.
This is also the default provider if none is given.

|===


[[cypher-deprecations-additions-removals-5.0]]
== Neo4j 5.0

=== Removed features

[cols="2", options="header"]
|===
| Feature
| Details

a|
[[cypher-5_0-r_1]]
label:functionality[]
label:removed[]
[source, cypher, role="noheader"]
----
SHOW EXISTS CONSTRAINTS
----
[source, cypher, role="noheader"]
----
SHOW NODE EXISTS CONSTRAINTS
----
[source, cypher, role="noheader"]
----
SHOW RELATIONSHIP EXISTS CONSTRAINTS
----
a|
Replaced by:
[source, cypher, role="noheader"]
----
SHOW [PROPERTY] EXIST[ENCE] CONSTRAINTS
----
[source, cypher, role="noheader"]
----
SHOW NODE [PROPERTY] EXIST[ENCE] CONSTRAINTS
----
[source, cypher, role="noheader"]
----
SHOW REL[ATIONSHIP] [PROPERTY] EXIST[ENCE] CONSTRAINTS
----

a|
[[cypher-5_0-r_2]]
label:functionality[]
label:removed[]
[source, cypher, role="noheader"]
----
SHOW INDEXES BRIEF
----
[source, cypher, role="noheader"]
----
SHOW CONSTRAINTS BRIEF
----
a|
Replaced by:
[source, cypher, role="noheader"]
----
SHOW INDEXES
----
[source, cypher, role="noheader"]
----
SHOW CONSTRAINTS
----

a|
[[cypher-5_0-r_3]]
label:functionality[]
label:removed[]
[source, cypher, role="noheader"]
----
SHOW INDEXES VERBOSE
----
[source, cypher, role="noheader"]
----
SHOW CONSTRAINTS VERBOSE
----
a|
Replaced by:
[source, cypher, role="noheader"]
----
SHOW INDEXES YIELD *
----
[source, cypher, role="noheader"]
----
SHOW CONSTRAINTS YIELD *
----

a|
[[cypher-5_0-r_4]]
label:functionality[]
label:removed[]
[source, cypher, role="noheader"]
----
DROP INDEX ON :Label(prop)
----
a|
Replaced by:
[source, cypher, role="noheader"]
----
DROP INDEX name
----

a|
[[cypher-5_0-r_5]]
label:functionality[]
label:removed[]
[source, cypher, role="noheader"]
----
DROP CONSTRAINT ON (n:Label) ASSERT (n.prop) IS NODE KEY
----
[source, cypher, role="noheader"]
----
DROP CONSTRAINT ON (n:Label) ASSERT (n.prop) IS UNIQUE
----
[source, cypher, role="noheader"]
----
DROP CONSTRAINT ON (n:Label) ASSERT exists(n.prop)
----
[source, cypher, role="noheader"]
----
DROP CONSTRAINT ON ()-[r:Type]-() ASSERT exists(r.prop)
----
a|
Replaced by:
[source, cypher, role="noheader"]
----
DROP CONSTRAINT name
----

a|
[[cypher-5_0-r_6]]
label:functionality[]
label:removed[]
[source, cypher, role="noheader"]
----
CREATE INDEX ON :Label(prop)
----
a|
Replaced by:
[source, cypher, role="noheader"]
----
CREATE INDEX FOR (n:Label) ON (n.prop)
----

a|
[[cypher-5_0-r_7]]
label:functionality[]
label:removed[]
[source, cypher, role="noheader"]
----
CREATE CONSTRAINT ON ... ASSERT ...
----
a|
Replaced by:
[source, cypher, role="noheader"]
----
CREATE CONSTRAINT FOR ... REQUIRE ...
----

a|
[[cypher-5_0-r_8]]
label:functionality[]
label:removed[]
[source, cypher, role="noheader"]
----
CREATE BTREE INDEX ...
----

label:functionality[]
label:removed[]
[source, cypher, role="noheader"]
----
CREATE INDEX
...
OPTIONS "{" btree-option: btree-value[, ...] "}"
----

a|
B-tree indexes are removed.

B-tree indexes used for `STRING` predicates are replaced by:
[source, cypher, role="noheader"]
----
CREATE TEXT INDEX ...
----

B-tree indexes used for spatial queries are replaced by:
[source, cypher, role="noheader"]
----
CREATE POINT INDEX ...
----

B-tree indexes used for general queries or property value types are replaced by:
[source, cypher, role="noheader"]
----
CREATE [RANGE] INDEX ...
----

These new indexes may be combined for multiple use cases.

a|
[[cypher-5_0-r_9]]
label:functionality[]
label:removed[]
[source, cypher, role="noheader"]
----
SHOW BTREE INDEXES
----
a|
B-tree indexes are removed.

Replaced by:
[source, cypher, role="noheader"]
----
SHOW {POINT \| RANGE \| TEXT} INDEXES

----
a|
[[cypher-5_0-r_10]]
label:functionality[]
label:removed[]
[source, cypher, role="noheader"]
----
USING BTREE INDEXES
----
a|
B-tree indexes are removed.

Replaced by:
[source, cypher, role="noheader"]
----
USING {POINT \| RANGE \| TEXT} INDEX
----


a|
[[cypher-5_0-r_11]]
label:functionality[]
label:removed[]
[source, cypher, role="noheader"]
----
CREATE CONSTRAINT
...
OPTIONS "{" btree-option: btree-value[, ...] "}"
----
a|
Node key and property uniqueness constraints backed by B-tree indexes are removed.

Replaced by:
[source, cypher, role="noheader"]
----
CREATE CONSTRAINT ...
----
Constraints used for `STRING` properties require an additional text index to cover the `STRING` predicates properly.
Constraints used for point properties require an additional point index to cover the spatial queries properly.

a|
[[cypher-5_0-r_12]]
label:functionality[]
label:removed[]
[source, cypher, role="noheader"]
----
SHOW INDEXES YIELD uniqueness
----
a|
The `uniqueness` output has been removed along with the concept of index uniqueness, as it actually belongs to the constraint and not the index.

The new column `owningConstraint` was introduced to indicate whether an index belongs to a constraint or not.

a|
[[cypher-5_0-r_13]]
label:functionality[]
label:removed[]
[source, cypher, role="noheader"]
----
SHOW CONSTRAINTS YIELD ownedIndexId
----
a|
The `ownedIndexId` output has been removed and replaced by the new `ownedIndex` column.

a|
[[cypher-5_0-r_14]]
label:functionality[]
label:removed[] +
For privilege commands:
[source, cypher, role="noheader"]
----
ON DEFAULT DATABASE
----
a|
Replaced by:
[source, cypher, role="noheader"]
----
ON HOME DATABASE
----


a|
[[cypher-5_0-r_15]]
label:functionality[]
label:removed[] +
For privilege commands:
[source, cypher, role="noheader"]
----
ON DEFAULT GRAPH
----
a|
Replaced by:
[source, cypher, role="noheader"]
----
ON HOME GRAPH
----


a|
[[cypher-5_0-r_16]]
label:functionality[]
label:removed[]
[source, cypher, role="noheader"]
----
SHOW TRANSACTIONS YIELD allocatedBytes
----
a|
The `allocatedBytes` output has been removed, because it was never tracked and thus was always 0.

a|
[[cypher-5_0-r_17]]
label:functionality[]
label:removed[]
[source, cypher, role="noheader"]
----
exists(prop)
----
a|
Replaced by:
[source, cypher, role="noheader"]
----
prop IS NOT NULL
----

a|
[[cypher-5_0-r_18]]
label:functionality[]
label:removed[]
[source, cypher, role="noheader"]
----
NOT exists(prop)
----
a|
Replaced by:
[source, cypher, role="noheader"]
----
prop IS NULL
----

a|
[[cypher-5_0-r_19]]
label:functionality[]
label:removed[]
[source, cypher, role="noheader"]
----
0...
----
a|
Replaced by `+0o...+`.


a|
[[cypher-5_0-r_20]]
label:functionality[]
label:removed[]
[source, cypher, role="noheader"]
----
0X...
----
a|
Only `+0x...+` (lowercase x) is supported.

a|
[[cypher-5_0-r_21]]
label:functionality[]
label:removed[]
[source, cypher, role="noheader"]
----
MATCH ()-[r]-()
RETURN [ ()-[r]-()-[r]-() \| r ] AS rs
----
a|
Remaining support for repeated relationship variables is removed.

a|
[[cypher-5_0-r_22]]
label:functionality[]
label:removed[]
[source, cypher, role="noheader"]
----
WHERE [1,2,3]
----
a|
Automatic coercion of a list to a boolean is removed.

Replaced by:
[source, cypher, role="noheader"]
----
WHERE NOT isEmpty([1, 2, 3])
----

a|
[[cypher-5_0-r_23]]
label:functionality[]
label:removed[]
[source, cypher, role="noheader"]
----
distance(n.prop, point({x:0, y:0})
----
a|
Replaced by:
[source, cypher, role="noheader"]
----
point.distance(n.prop, point({x:0, y:0})
----

a|
[[cypher-5_0-r_24]]
label:functionality[]
label:removed[]
[source, cypher, role="noheader"]
----
point({x:0, y:0}) <= point({x:1, y:1}) <= point({x:2, y:2})
----
a|
The ability to use operators `<`, `+<=+`, `>`, or `>=` on spatial points is removed.
Instead, use:
[source, cypher, role="noheader"]
----
point.withinBBox(point({x:1, y:1}), point({x:0, y:0}), point({x:2, y:2}))
----

a|
[[cypher-5_0-r_25]]
label:functionality[]
label:removed[]
[source, cypher, role="noheader"]
----
USING PERIODIC COMMIT ...
----
a|
Replaced by:
[source, cypher, role="noheader"]
----
CALL {
  ...
} IN TRANSACTIONS
----

a|
[[cypher-5_0-r_26]]
label:functionality[]
label:removed[]
[source, cypher, role="noheader"]
----
CREATE (a {prop:7})-[r:R]->(b {prop: a.prop})
----
a|
It is no longer allowed to have `CREATE` clauses in which a variable introduced in the pattern is also referenced from the same pattern.

a|
[[cypher-5_0-r_27]]
label:functionality[]
label:removed[]
[source, cypher, role="noheader"]
----
CALL { RETURN 1 }
----
a|
Unaliased expressions are no longer supported in subquery `RETURN` clauses. Replaced by:
[source, cypher, role="noheader"]
----
CALL { RETURN 1 AS one }
----

a|
[[cypher-5_0-r_28]]
label:functionality[]
label:removed[]
[source, cypher, role="noheader"]
----
MATCH (a) RETURN (a)--()
----
a|
Pattern expressions producing lists of paths are no longer supported, but they can still be used as existence predicates, for example in `WHERE` clauses.
Instead, use a pattern comprehension:
[source, cypher, role="noheader"]
----
MATCH (a) RETURN [p=(a)--() \| p]
----

a|
[[cypher-5_0-r_29]]
label:functionality[]
label:removed[]
[source, cypher, role="noheader"]
----
MATCH (n) RETURN n.propertyName_1, n.propertyName_2 + count(*)
----
a|
Implied grouping keys are no longer supported.
Only expressions that do _not_ contain aggregations are still considered grouping keys.
In expressions that contain aggregations, the leaves must be either:

- An aggregation
- A literal
- A parameter
- A variable, *ONLY IF* it is either:
1) A projection expression on its own (e.g. the `n` in `RETURN n AS myNode, n.value + count(*)`) +
2) A local variable in the expression (e.g the `x` in `RETURN n, n.prop + size([ x IN range(1, 10) \| x ]`)
- Property access, *ONLY IF* it is also a projection expression on its own (e.g. the `n.prop` in `RETURN n.prop, n.prop + count(*)`) +
- Map access, *ONLY IF* it is also a projection expression on its own (e.g. the `map.prop` in `WITH {prop: 2} AS map RETURN map.prop, map.prop + count(*)`)


|===

=== Deprecated features

[cols="2", options="header"]
|===
| Feature
| Details

a|
[[cypher-5_0-d_1]]
label:functionality[]
label:deprecated[]
[source, cypher, role="noheader"]
----
MATCH (n)-[r:REL]->(m) SET n=r
----
a|
Use the `properties()` function instead to get the map of properties of nodes/relationships that
can then be used in a `SET` clause:
[source, cypher, role="noheader"]
----
MATCH (n)-[r:REL]->(m) SET n=properties(r)
----

a|
[[cypher-5_0-d_2]]
label:functionality[]
label:deprecated[]
[source, cypher, role="noheader"]
----
MATCH (a), (b), allShortestPaths((a)-[r]->(b)) RETURN b

MATCH (a), (b), shortestPath((a)-[r]->(b)) RETURN b
----
a|
`shortestPath` and `allShortestPaths` without xref:patterns/reference.adoc#variable-length-relationships[variable-length relationship] are deprecated. Instead, use a `MATCH` with a `LIMIT` of 1 or:
[source, cypher, role="noheader"]
----
MATCH (a), (b), shortestPath((a)-[r*1..1]->(b)) RETURN b
----

a|
[[cypher-5_0-d_3]]
label:functionality[]
label:deprecated[]
[source, cypher, role="noheader"]
----
CREATE DATABASE databaseName.withDot ...
----
a|
Creating a database with unescaped dots in the name has been deprecated, instead escape the database name:

[source, cypher, role="noheader"]
----
CREATE DATABASE `databaseName.withDot` ...
----

a|
[[cypher-5_0-d_4]]
label:functionality[]
label:deprecated[]
[source, cypher, role="noheader"]
----
()-[:A\|:B]->()
----
a|
Replaced by:
[source, cypher, role="noheader"]
----
()-[:A\|B]->()
----

|===

=== Updated features

[cols="2", options="header"]
|===
| Feature
| Details

a|
[[cypher-5_0-u_1]]
label:functionality[]
label:updated[]
[source, cypher, role="noheader"]
----
CREATE INDEX ...
----
a|
The default index type is changed from B-tree to range index.

a|
[[cypher-5_0-u_2]]
label:functionality[]
label:updated[]
[source, cypher, role="noheader"]
----
SHOW INDEXES
----
a|
The new column `owningConstraint` was added and will be returned by default from now on.
It will list the name of the constraint that the index is associated with or `null`, in case it is not associated with any constraint.

a|
[[cypher-5_0-u_3]]
label:functionality[]
label:updated[]
[source, cypher, role="noheader"]
----
SHOW CONSTRAINTS
----
a|
The new column `ownedIndex` was added and will be returned by default from now on.
It will list the name of the index associated with the constraint or `null`, in case no index is associated with it.

a|
[[cypher-5_0-u_4]]
label:functionality[]
label:updated[]
[source, cypher, role="noheader"]
----
SHOW TRANSACTIONS YIELD *
----
a|
New columns for the current query are added:

* `currentQueryStartTime`
* `currentQueryStatus`
* `currentQueryActiveLockCount`
* `currentQueryElapsedTime`
* `currentQueryCpuTime`
* `currentQueryWaitTime`
* `currentQueryIdleTime`
* `currentQueryAllocatedBytes`
* `currentQueryPageHits`
* `currentQueryPageFaults`

These columns are only returned in the full set (with `YIELD`) and not by default.

a|
[[cypher-5_0-u_5]]
label:functionality[]
label:updated[]
[source, cypher, role="noheader"]
----
TERMINATE TRANSACTIONS transaction-id[,...]
YIELD { * \| field[, ...] }
[ORDER BY field[, ...]]
[SKIP n]
[LIMIT n]
[WHERE expression]
[RETURN field[, ...] [ORDER BY field[, ...]] [SKIP n] [LIMIT n]]
----
a|
Terminate transaction now allows `YIELD`.
The `WHERE` clause is not allowed on its own, as it is for `SHOW`, but needs the `YIELD` clause.

a|
[[cypher-5_0-u_6]]
label:functionality[]
label:updated[]
[source, cypher, role="noheader"]
----
SHOW TRANSACTIONS [transaction-id[,...]]
----
[source, cypher, role="noheader"]
----
TERMINATE TRANSACTIONS transaction-id[,...]
----
a|
`transaction-id` now allows general expressions resolving to a `STRING` or `LIST<STRING>` instead of just parameters.

a|
[[cypher-5_0-u_7]]
label:functionality[]
label:updated[]
[source, cypher, role="noheader"]
----
SHOW TRANSACTIONS [transaction-id[,...]]
YIELD field[, ...]
  [ORDER BY field[, ...]]
  [SKIP n]
  [LIMIT n]
  [WHERE expression]
TERMINATE TRANSACTIONS transaction-id[,...]
YIELD field[, ...]
  [ORDER BY field[, ...]]
  [SKIP n]
  [LIMIT n]
  [WHERE expression]
RETURN field[, ...]
  [ORDER BY field[, ...]]
  [SKIP n]
  [LIMIT n]
----
a|
The `SHOW` and `TERMINATE TRANSACTIONS` commands can be combined in the same query.
The query does not require a specific order and there can be zero or more of each command type, however at least one command is needed.

When the command is not in standalone mode, the `YIELD` and `RETURN` clauses are mandatory.
`YIELD *` is not allowed.

`transaction-id` is a comma-separated list of one or more quoted `STRING` values.
It could also be an expression resolving to a `STRING` or a `LIST<STRING>` (for example the output column from `SHOW`).

a|
[[cypher-5_0-u_8]]
label:functionality[]
label:updated[]
[source, cypher, role="noheader"]
----
GRANT EXECUTE BOOSTED PROCEDURE ...
GRANT EXECUTE BOOSTED FUNCTION ...
----
a|
Not a syntax change but a semantic one.
The `EXECUTE BOOSTED` privilege will no longer include an implicit `EXECUTE` privilege when granted.
That means that to execute a procedure or a function with boosted privileges both `EXECUTE` and `EXECUTE BOOSTED` are needed.

a|
[[cypher-5_0-u_9]]
label:functionality[]
label:updated[]
[source, cypher, role="noheader"]
----
[GRANT\|DENY] [IMMUTABLE] ...
----
a|
Privileges can be specified as `IMMUTABLE`, which means that they cannot be altered by users with Privilege Management.
They can only be administered with auth disabled.

a|
[[cypher-5_0-u_10]]
label:functionality[]
label:updated[]
[source, cypher, role="noheader"]
----
REVOKE [IMMUTABLE] ...
----
a|
`IMMUTABLE` can now be specified with the `REVOKE` command to specify that only immutable privileges should be revoked.

a|
[[cypher-5_0-u_11]]
label:functionality[]
label:updated[]
[source, cypher, role="noheader"]
----
SHOW DATABASES
----
a|
Changes to the default columns in the result:

* The `writer`, `type`, and `constituents` columns have been added.
* The values returned in the `role` column have changes to be just `primary`, `secondary`, or `unknown`.
* The `error` column has been renamed to `statusMessage`.

The following columns have been added to the full result set (with `YIELD`) and not by default:

* `creationTime`
* `lastStartTime`
* `lastStopTime`
* `store`
* `currentPrimariesCount`
* `currentSecondariesCount`
* `requestedPrimariesCount`
* `requestedSecondariesCount`

a|
[[cypher-5_0-u_12]]
label:functionality[]
label:updated[]
[source, cypher, role="noheader"]
----
MATCH (n)
RETURN
CASE n.prop
    WHEN null THEN 'one'
    ELSE 'two'
END
----
a|
Previously, if `n.prop` is `null`, `'one'` would be returned.
Now, `'two'` is returned.

This is a semantic change only.
Since `null = null` returns `false` in Cypher, a `WHEN` expression no longer matches on `null`.

If matching on `null` is required, please use `IS NULL` instead:
[source, cypher, role="noheader"]
----
MATCH (n)
RETURN
CASE
    WHEN n.prop IS NULL THEN 'one'
    ELSE 'two'
END
----

a|
[[cypher-5_0-u_13]]
label:functionality[]
label:updated[]
[source, cypher, role="noheader"]
----
RETURN round(val, precision)
----
a|
Rounding infinity and NaN values will now return the original value instead of
returning an integer approximation for precision 0 and throwing an exception for precision > 0:

[cols="1,1,1"]
!===
! !old value !new value

!round(Inf)
!9223372036854776000.0
!Inf

!round(Inf, 1)
!exception
!Inf

!round(NaN)
!0
!NaN

!round(Inf, 1)
!exception
!NaN

!===
To get an integer value use the `toInteger` function.

a|
[[cypher-5_0-u_14]]
label:functionality[]
label:updated[]
[source, cypher, role="noheader"]
----
CREATE [OR REPLACE] ALIAS compositeDatabase.aliasName ...
ALTER ALIAS compositeDatabase.aliasName
DROP ALIAS compositeDatabase.aliasName
----
a| The alias commands can now handle aliases in composite databases.

a|
[[cypher-5_0-u_15]]
label:functionality[]
label:updated[]
[source, cypher, role="noheader"]
----
SHOW ALIAS[ES] aliasName FOR DATABASE[S]
SHOW ALIAS[ES] compositeDatabase.aliasName FOR DATABASE[S]
----
a| `SHOW ALIAS` now allows for easy filtering on alias name.

a|
[[cypher-5_0-u_16]]
label:functionality[]
label:updated[]
[source, cypher, role="noheader"]
----
CREATE [OR REPLACE] ALIAS compositeDatabase.aliasName ...
ALTER ALIAS compositeDatabase.aliasName
DROP ALIAS compositeDatabase.aliasName
----
a| The alias commands can now handle aliases in composite databases.

a|
[[cypher-5_0-u_17]]
label:functionality[]
label:updated[]
[source, cypher, role="noheader"]
----
SHOW ALIAS[ES] aliasName FOR DATABASE[S]
SHOW ALIAS[ES] compositeDatabase.aliasName FOR DATABASE[S]
----
a| `SHOW ALIAS` now allows for easy filtering on alias name.

|===

=== New features

[cols="2", options="header"]
|===
| Feature
| Details

a|
[[cypher-5_0-a_1]]
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
CREATE [OR REPLACE] COMPOSITE DATABASE databaseName [IF NOT EXISTS] [WAIT [n [SEC[OND[S]]]]\|NOWAIT]
DROP COMPOSITE DATABASE databaseName [IF EXISTS] [DUMP DATA \| DESTROY DATA] [WAIT [n [SEC[OND[S]]]]\|NOWAIT]
----
a| New Cypher command for creating and dropping composite databases.

a|
[[cypher-5_0-a_2]]
label:functionality[]
label:new[] +
New privilege:
[source, cypher, role="noheader"]
----
CREATE COMPOSITE DATABASE
DROP COMPOSITE DATABASE
COMPOSITE DATABASE MANAGEMENT
----
a|
New privileges that allow a user to `CREATE` and/or `DROP` composite databases.

a|
[[cypher-5_0-a_3]]
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
1_000_000, 0x_FF_FF, 0o_88_88
----
a|
Cypher now supports number literals with underscores between digits.

a|
[[cypher-5_0-a_4]]
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
isNaN(n.prop)
----
a|
New function which returns whether the given number is `NaN`.
`NaN` is a special floating point number defined in the Floating-Point Standard IEEE 754.
This function was introduced since comparisons including `NaN = NaN` returns false.

a|
[[cypher-5_0-a_5]]
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
NaN, Inf, Infinity
----
a|
Cypher now supports float literals for the values `Infinity` and `NaN`.
`NaN` defines a quiet not-a-number value and does not throw any exceptions in arithmetic operations.
Both values are implemented according to the Floating-Point Standard IEEE 754.

a|
[[cypher-5_0-a_6]]
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
COUNT { (n) WHERE n.foo = "bar" }
----
a|
New expression which returns the number of results of a subquery.

a|
[[cypher-5_0-a_7]]
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
CREATE DATABASE ... TOPOLOGY n PRIMAR{Y\|IES} [m SECONDAR{Y\|IES}]
----
a|
New sub-clause for `CREATE DATABASE`, to specify the number of servers hosting a database, when creating a database in cluster environments.

a|
[[cypher-5_0-a_8]]
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
ALTER DATABASE ... SET TOPOLOGY n PRIMAR{Y\|IES} [m SECONDAR{Y\|IES}]
----
a|
New sub-clause for `ALTER DATABASE`, which allows modifying the number of servers hosting a database in cluster environments.

a|
[[cypher-5_0-a_9]]
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
ENABLE SERVER ...
----
a|
New Cypher command for enabling servers.

a|
[[cypher-5_0-a_10]]
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
ALTER SERVER ... SET OPTIONS ...
----
a|
New Cypher command for setting options for a server.

a|
[[cypher-5_0-a_11]]
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
RENAME SERVER ... TO ...
----
a|
New Cypher command for changing the name of a server.

a|
[[cypher-5_0-a_12]]
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
REALLOCATE DATABASES
----
a|
New Cypher command for re-balancing what servers host which databases.

a|
[[cypher-5_0-a_13]]
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
DEALLOCATE DATABASE[S] FROM SERVER[S] ...
----
a|
New Cypher command for moving all databases from servers.

a|
[[cypher-5_0-a_14]]
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
DROP SERVER ...
----
a|
New Cypher command for dropping servers.

a|
[[cypher-5_0-a_15]]
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
SHOW SERVERS
----
a|
New Cypher command for listing servers.

a|
[[cypher-5_0-a_16]]
label:functionality[]
label:new[] +
New privileges:
[source, cypher, role="noheader"]
----
SERVER MANAGEMENT
----
[source, cypher, role="noheader"]
----
SHOW SERVERS
----
a|
New privileges that allow a user to create, modify, reallocate, deallocate, drop and list servers.

a|
[[cypher-5_0-a_17]]
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
MATCH (n: A&(B\|C)&!D)
----
a|
New concise syntax for expressing predicates for which labels a node may have, referred to as label expression.

a|
[[cypher-5_0-a_18]]
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
MATCH ()-[r:(!A&!B)]->()
----
a|
New concise syntax for expressing predicates for which relationship types a relationship may have, referred to as relationship type expression.

a|
[[cypher-5_0-a_19]]
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
MATCH ()-[r:R {prop1: 42} WHERE r.prop2 > 42]->()
----
a|
New syntax that enables inlining of `WHERE` clauses inside relationship patterns.

|===


[[cypher-deprecations-additions-removals-4.4]]
== Neo4j 4.4

=== Deprecated features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:functionality[]
label:deprecated[]
[source, cypher, role="noheader"]
----
MATCH (n) RETURN n.propertyName_1, n.propertyName_2 + count(*)
----
a|
Implied grouping keys are deprecated.
Only expressions that do _not_ contain aggregations are still considered grouping keys.
In expressions that contain aggregations, the leaves must be either:

- An aggregation
- A literal
- A parameter
- A variable, *ONLY IF* it is either: +
1) A projection expression on its own (e.g. the `n` in `RETURN n AS myNode, n.value + count(*)`) +
2) A local variable in the expression (e.g the `x` in `RETURN n, n.prop + size([ x IN range(1, 10) \| x ]`)
- Property access, *ONLY IF* it is also a projection expression on its own (e.g. the `n.prop` in `RETURN n.prop, n.prop + count(*)`) +
- Map access, *ONLY IF* it is also a projection expression on its own (e.g. the `map.prop` in `WITH {prop: 2} AS map RETURN map.prop, map.prop + count(*)`)

a|
label:syntax[]
label:deprecated[]
[source, cypher, role="noheader"]
----
USING PERIODIC COMMIT ...
----
a|
Replaced by:
[source, cypher, role="noheader"]
----
CALL {
  ...
} IN TRANSACTIONS
----

a|
label:syntax[]
label:deprecated[]
[source, cypher, role="noheader"]
----
CREATE (a {prop:7})-[r:R]->(b {prop: a.prop})
----
a|
`CREATE` clauses in which a variable introduced in the pattern is also referenced from the same pattern are deprecated.


a|
label:syntax[]
label:deprecated[]
[source, cypher, role="noheader"]
----
CREATE CONSTRAINT ON ... ASSERT ...
----
a|
Replaced by:
[source, cypher, role="noheader"]
----
CREATE CONSTRAINT FOR ... REQUIRE ...
----

a|
label:functionality[]
label:deprecated[]
[source, cypher, role="noheader"]
----
CREATE BTREE INDEX ...
----
.2+.^a|
B-tree indexes are deprecated.

B-tree indexes used for string queries are replaced by:
[source, cypher, role="noheader"]
----
CREATE TEXT INDEX ...
----

B-tree indexes used for spatial queries are replaced by:
[source, cypher, role="noheader"]
----
CREATE POINT INDEX ...
----

B-tree indexes used for general queries or property value types are replaced by:
[source, cypher, role="noheader"]
----
CREATE RANGE INDEX ...
----

These new indexes may be combined for multiple use cases.

a|
label:functionality[]
label:deprecated[]
[source, cypher, role="noheader"]
----
CREATE INDEX
...
OPTIONS "{" btree-option: btree-value[, ...] "}"
----


a|
label:functionality[]
label:deprecated[]
[source, cypher, role="noheader"]
----
SHOW BTREE INDEXES
----
a|
B-tree indexes are deprecated.

Replaced by:
[source, cypher, role="noheader"]
----
SHOW {POINT \| RANGE \| TEXT} INDEXES
----

a|
label:functionality[]
label:deprecated[]
[source, cypher, role="noheader"]
----
USING BTREE INDEX
----
a|
B-tree indexes are deprecated.

Replaced by:
[source, cypher, role="noheader"]
----
USING {POINT \| RANGE \| TEXT} INDEX
----

a|
label:functionality[]
label:deprecated[]
[source, cypher, role="noheader"]
----
CREATE CONSTRAINT
...
OPTIONS "{" btree-option: btree-value[, ...] "}"
----
a|
Node key and property uniqueness constraints with B-tree options are deprecated.

Replaced by:
[source, cypher, role="noheader"]
----
CREATE CONSTRAINT
...
OPTIONS "{" range-option: range-value[, ...] "}"
----
Constraints used for string properties will also require an additional text index to cover the string queries properly.
Constraints used for point properties will also require an additional point index to cover the spatial queries properly.


a|
label:functionality[]
label:deprecated[]
[source, cypher, role="noheader"]
----
distance(n.prop, point({x:0, y:0})
----
a|
Replaced by:
[source, cypher, role="noheader"]
----
point.distance(n.prop, point({x:0, y:0})
----

a|
label:functionality[]
label:deprecated[]
[source, cypher, role="noheader"]
----
point({x:0, y:0}) <= point({x:1, y:1}) <= point({x:2, y:2})
----
a|
The ability to use the inequality operators `<`, `<=`, `>`, and `>=` on spatial points is deprecated.
Instead, use:
[source, cypher, role="noheader"]
----
point.withinBBox(point({x:1, y:1}), point({x:0, y:0}), point({x:2, y:2}))
----

a|
label:functionality[]
label:deprecated[]
[source, cypher, role="noheader"]
----
MATCH (n)
RETURN
CASE n.prop
    WHEN null THEN 'one'
    ELSE 'two'
END
----
a|
Currently, if `n.prop` is `null`, `'one'` would be returned.
Since `null = null` returns `false` in Cypher, a `WHEN` expression will no longer match in future versions.

Please use `IS NULL` instead:
[source, cypher, role="noheader"]
----
MATCH (n)
RETURN
CASE
    WHEN n.prop IS NULL THEN 'one'
    ELSE 'two'
END
----
|===

=== New features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
CALL {
  ...
} IN TRANSACTIONS
----
a|
New clause for evaluating a subquery in separate transactions.
Typically used when modifying or importing large amounts of data.
See xref:subqueries/subqueries-in-transactions.adoc[CALL +++{ ... }+++ IN TRANSACTIONS].

a|
label:syntax[]
label:new[]
[source, cypher, role="noheader"]
----
CREATE CONSTRAINT FOR ... REQUIRE ...
----
a|
New syntax for creating constraints, applicable to all constraint types.

a|
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
CREATE CONSTRAINT [constraint_name] [IF NOT EXISTS]
FOR (n:LabelName)
REQUIRE (n.propertyName_1, â¦, n.propertyName_n) IS UNIQUE
[OPTIONS "{" option: value[, ...] "}"]
----
a|
Property uniqueness constraints now allow multiple properties, ensuring that the combination of property values are unique.

a|
label:functionality[]
label:new[]
label:deprecated[]
[source, cypher, role="noheader"]
----
DROP CONSTRAINT
ON (n:LabelName)
ASSERT (n.propertyName_1, â¦, n.propertyName_n) IS UNIQUE
----
a|
Property uniqueness constraints now allow multiple properties.

Replaced by:
[source, cypher, role="noheader"]
----
DROP CONSTRAINT name [IF EXISTS]
----

a|
label:syntax[]
label:new[]
[source, cypher, role="noheader"]
----
CREATE CONSTRAINT [constraint_name] [IF NOT EXISTS]
FOR ...
REQUIRE ... IS NOT NULL
OPTIONS "{" "}"
----
a|
Existence constraints now allow an `OPTIONS` map, however, at this point there are no available values for the map.

a|
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
CREATE LOOKUP INDEX [index_name] [IF NOT EXISTS]
FOR ... ON ...
OPTIONS "{" option: value[, ...] "}"
----
a|
Token lookup indexes now allow an `OPTIONS` map to specify the index provider.


a|
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
CREATE TEXT INDEX ...
----
a|
Allows creating text indexes on nodes or relationships with a particular label or relationship type, and property combination.
They can be dropped by using their name.


a|
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
CREATE RANGE INDEX ...
----
a|
Allows creating range indexes on nodes or relationships with a particular label or relationship type, and properties combination.
They can be dropped by using their name.

a|
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
CREATE CONSTRAINT
...
OPTIONS "{" indexProvider: 'range-1.0' "}"
----
a|
Allows creating node key and property uniqueness constraints backed by range indexes by providing the range index provider in the `OPTIONS` map.


a|
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
CREATE POINT INDEX ...
----
a|
Allows creating point indexes on nodes or relationships with a particular label or relationship type, and property combination.
They can be dropped by using their name.

a|
label:syntax[]
label:new[] +
New privilege:
[source, cypher, role="noheader"]
----
IMPERSONATE
----
a|
New privilege that allows a user to assume privileges of another one.

a|
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
SHOW TRANSACTION[S] [transaction-id[,...]]
[YIELD { * \| field[, ...] } [ORDER BY field[, ...]] [SKIP n] [LIMIT n]]
[WHERE expression]
[RETURN field[, ...] [ORDER BY field[, ...]] [SKIP n] [LIMIT n]]
----
a|
List transactions on the current server.

The `transaction-id` is a comma-separated list of one or more quoted `STRING` values, a `STRING` parameter, or a list parameter.

This replaces the procedures `dbms.listTransactions` and `dbms.listQueries`.

a|
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
TERMINATE TRANSACTION[S] transaction-id[,...]
----
a|
Terminate transactions on the current server.

The `transaction-id` is a comma-separated list of one or more quoted `STRING` values, a `STRING` parameter, or a list parameter.

This replaces the procedures `dbms.killTransaction`, `dbms.killTransactions`, `dbms.killQuery`, and `dbms.killQueries`.


a|
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
ALTER DATABASE ...  [IF EXISTS]
SET ACCESS {READ ONLY \| READ WRITE}
----
a|
New Cypher command for modifying a database by changing its access mode.

a|
label:functionality[]
label:new[] +
New privilege:
[source, cypher, role="noheader"]
----
ALTER DATABASE
----
a|
New privilege that allows a user to modify databases.

a|
label:functionality[]
label:new[] +
New privilege:
[source, cypher, role="noheader"]
----
SET DATABASE ACCESS
----
a|
New privilege that allows a user to modify database access mode.
a|
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
CREATE ALIAS ... [IF NOT EXISTS]
FOR DATABASE ...
----
a|
New Cypher command for creating an alias for a database name. Remote aliases are only supported from Neo4j 4.4.8.

a|
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
CREATE OR REPLACE ALIAS ...
FOR DATABASE ...
----
a|
New Cypher command for creating or replacing an alias for a database name. Remote aliases are only supported from Neo4j 4.4.8.
a|
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
ALTER ALIAS ... [IF EXISTS]
SET DATABASE ...
----
a|
New Cypher command for altering an alias. Remote aliases are only supported from Neo4j 4.4.8.

a|
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
DROP ALIAS ... [IF EXISTS] FOR DATABASE
----
a|
New Cypher command for dropping a database alias.

a|
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
SHOW ALIASES FOR DATABASE
----
a|
New Cypher command for listing database aliases. Only supported since Neo4j 4.4.8.

a|
label:functionality[]
label:new[] +
New privilege:
[source, cypher, role="noheader"]
----
ALIAS MANAGEMENT
----
a|
New privilege that allows a user to create, modify, delete and list aliases. Only supported since Neo4j 4.4.8.

a|
label:functionality[]
label:new[] +
New privilege:
[source, cypher, role="noheader"]
----
CREATE ALIAS
----
a|
New privilege that allows a user to create aliases. Only supported since Neo4j 4.4.8.

a|
label:functionality[]
label:new[] +
New privilege:
[source, cypher, role="noheader"]
----
ALTER ALIAS
----
a|
New privilege that allows a user to modify aliases. Only supported since Neo4j 4.4.8.

a|
label:functionality[]
label:new[] +
New privilege:
[source, cypher, role="noheader"]
----
DROP ALIAS
----
a|
New privilege that allows a user to delete aliases. Only supported since Neo4j 4.4.8.

a|
label:functionality[]
label:new[] +
New privilege:
[source, cypher, role="noheader"]
----
SHOW ALIAS
----
a|
New privilege that allows a user to show aliases. Only supported since Neo4j 4.4.8.

a|
label:syntax[]
label:new[]
[source, cypher, role="noheader"]
----
MATCH (n:N {prop1: 42} WHERE n.prop2 > 42)
----
a|
New syntax that enables inlining of `WHERE` clauses inside node patterns.

|===


[[cypher-deprecations-additions-removals-4.3]]
== Neo4j 4.3

=== Deprecated features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:syntax[]
label:deprecated[]
[source, cypher, role="noheader"]
----
CREATE CONSTRAINT [name]
ON (node:Label)
ASSERT exists(node.property)
----
a| Replaced by:
[source, cypher, role="noheader"]
----
CREATE CONSTRAINT [name]
ON (node:Label)
ASSERT node.property IS NOT NULL
----


a|
label:syntax[]
label:deprecated[]
[source, cypher, role="noheader"]
----
CREATE CONSTRAINT [name]
ON ()-[rel:REL]-()
ASSERT exists(rel.property)
----
a|
Replaced by:
[source, cypher, role="noheader"]
----
CREATE CONSTRAINT [name]
ON ()-[rel:REL]-()
ASSERT rel.property IS NOT NULL
----


a|
label:syntax[]
label:deprecated[]
[source, cypher, role="noheader"]
----
exists(prop)
----
a|
Replaced by:
[source, cypher, role="noheader"]
----
prop IS NOT NULL
----


a|
label:syntax[]
label:deprecated[]
[source, cypher, role="noheader"]
----
NOT exists(prop)
----
a|
Replaced by:
[source, cypher, role="noheader"]
----
prop IS NULL
----

a|
label:syntax[]
label:deprecated[] +
`BRIEF [OUTPUT]` for `SHOW INDEXES` and `SHOW CONSTRAINTS`.
a|
Replaced by default output columns.


a|
label:syntax[]
label:deprecated[] +
`VERBOSE [OUTPUT]` for `SHOW INDEXES` and `SHOW CONSTRAINTS`.
a|
Replaced by:
[source, cypher, role="noheader"]
----
YIELD *
----

a|
label:syntax[]
label:deprecated[]
[source, cypher, role="noheader"]
----
SHOW EXISTS CONSTRAINTS
----
a|
Replaced by:
[source, cypher, role="noheader"]
----
SHOW [PROPERTY] EXIST[ENCE] CONSTRAINTS
----
Still allows `BRIEF` and `VERBOSE` but not `YIELD` or `WHERE`.


a|
label:syntax[]
label:deprecated[]
[source, cypher, role="noheader"]
----
SHOW NODE EXISTS CONSTRAINTS
----
a|
Replaced by:
[source, cypher, role="noheader"]
----
SHOW NODE [PROPERTY] EXIST[ENCE] CONSTRAINTS
----
Still allows `BRIEF` and `VERBOSE` but not `YIELD` or `WHERE`.


a|
label:syntax[]
label:deprecated[]
[source, cypher, role="noheader"]
----
SHOW RELATIONSHIP EXISTS CONSTRAINTS
----
a|
Replaced by:
[source, cypher, role="noheader"]
----
SHOW RELATIONSHIP [PROPERTY] EXIST[ENCE] CONSTRAINTS
----
Still allows `BRIEF` and `VERBOSE` but not `YIELD` or `WHERE`.

a|
label:syntax[]
label:deprecated[] +
For privilege commands:
[source, cypher, role="noheader"]
----
ON DEFAULT DATABASE
----
a|
Replaced by:
[source, cypher, role="noheader"]
----
ON HOME DATABASE
----


a|
label:syntax[]
label:deprecated[] +
For privilege commands:
[source, cypher, role="noheader"]
----
ON DEFAULT GRAPH
----
a|
Replaced by:
[source, cypher, role="noheader"]
----
ON HOME GRAPH
----

a|
label:syntax[]
label:deprecated[]
[source, cypher, role="noheader"]
----
MATCH (a) RETURN (a)--()
----
a|
Pattern expressions producing lists of paths are deprecated, but they can still be used as existence predicates, for example in `WHERE` clauses.
Instead, use a pattern comprehension:
[source, cypher, role="noheader"]
----
MATCH (a) RETURN [p=(a)--() \| p]
----
|===

=== Updated features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:functionality[]
label:updated[]
[source, cypher, role="noheader"]
----
SHOW INDEXES WHERE ...
----
a|
Now allows filtering for:
[source, cypher, role="noheader"]
----
SHOW INDEXES
----


a|
label:functionality[]
label:updated[]
[source, cypher, role="noheader"]
----
SHOW CONSTRAINTS WHERE ...
----
a|
Now allows filtering for:
[source, cypher, role="noheader"]
----
SHOW CONSTRAINTS
----


a|
label:functionality[]
label:updated[]
[source, cypher, role="noheader"]
----
SHOW INDEXES YIELD ...
[WHERE ...]
[RETURN ...]
----
a|
Now allows `YIELD`, `WHERE`, and `RETURN` clauses to `SHOW INDEXES` to change the output.


a|
label:functionality[]
label:updated[]
[source, cypher, role="noheader"]
----
SHOW CONSTRAINTS YIELD ...
[WHERE ...]
[RETURN ...]
----
a|
Now allows `YIELD`, `WHERE`, and `RETURN` clauses to `SHOW CONSTRAINTS` to change the output.


a|
label:syntax[]
label:updated[]
[source, cypher, role="noheader"]
----
SHOW [PROPERTY] EXIST[ENCE] CONSTRAINTS
----
a|
New syntax for filtering `SHOW CONSTRAINTS` on property existence constraints. +
Allows `YIELD` and `WHERE` but not `BRIEF` or `VERBOSE`.


a|
label:syntax[]
label:updated[]
[source, cypher, role="noheader"]
----
SHOW NODE [PROPERTY] EXIST[ENCE] CONSTRAINTS
----
a|
New syntax for filtering `SHOW CONSTRAINTS` on node property existence constraints. +
Allows `YIELD` and `WHERE` but not `BRIEF` or `VERBOSE`.


a|
label:syntax[]
label:updated[]
[source, cypher, role="noheader"]
----
SHOW REL[ATIONSHIP] [PROPERTY] EXIST[ENCE] CONSTRAINTS
----
a|
New syntax for filtering `SHOW CONSTRAINTS` on relationship property existence constraints. +
Allows `YIELD` and `WHERE` but not `BRIEF` or `VERBOSE`.


a|
label:functionality[]
label:updated[]
[source, cypher, role="noheader"]
----
SHOW FULLTEXT INDEXES
----
a|
Now allows easy filtering for `SHOW INDEXES` on fulltext indexes. +
Allows `YIELD` and `WHERE` but not `BRIEF` or `VERBOSE`.


a|
label:functionality[]
label:updated[]
[source, cypher, role="noheader"]
----
SHOW LOOKUP INDEXES
----
a|
Now allows easy filtering for `SHOW INDEXES` on token lookup indexes. +
Allows `YIELD` and `WHERE` but not `BRIEF` or `VERBOSE`.
|===

=== New features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:syntax[]
label:new[]
[source, cypher, role="noheader"]
----
CREATE DATABASE ...
[OPTIONS {...}]
----
a|
New syntax to pass options to `CREATE DATABASE`.
This can be used to specify a specific cluster node to seed data from.


a|
label:syntax[]
label:new[]
[source, cypher, role="noheader"]
----
CREATE CONSTRAINT [name]
ON (node:Label)
ASSERT node.property IS NOT NULL
----
a|
New syntax for creating node property existence constraints.


a|
label:syntax[]
label:new[]
[source, cypher, role="noheader"]
----
CREATE CONSTRAINT [name]
ON ()-[rel:REL]-()
ASSERT rel.property IS NOT NULL
----
a|
New syntax for creating relationship property existence constraints.


a|
label:syntax[]
label:new[]
[source, cypher, role="noheader"]
----
ALTER USER name IF EXISTS ...
----
a|
Makes altering users idempotent.
If the specified name does not exists, no error is thrown.


a|
label:syntax[]
label:new[]
[source, cypher, role="noheader"]
----
ALTER USER ...
SET HOME DATABASE ...
----
a|
Now allows setting home database for user.


a|
label:syntax[]
label:new[]
[source, cypher, role="noheader"]
----
ALTER USER ...
REMOVE HOME DATABASE
----
a|
Now allows removing home database for user.


a|
label:syntax[]
label:new[]
[source, cypher, role="noheader"]
----
CREATE USER ...
SET HOME DATABASE ...
----
a|
`CREATE USER` now allows setting home database for user.


a|
label:syntax[]
label:new[]
[source, cypher, role="noheader"]
----
SHOW HOME DATABASE
----
a|
New syntax for showing the home database of the current user.


a|
label:syntax[]
label:new[] +
New privilege:
[source, cypher, role="noheader"]
----
SET USER HOME DATABASE
----
a|
New Cypher command for administering privilege for changing users home database.


a|
label:syntax[]
label:new[] +
For privilege commands:
[source, cypher, role="noheader"]
----
ON HOME DATABASE
----
a|
New syntax for privileges affecting home database.


a|
label:syntax[]
label:new[] +
For privilege commands:
[source, cypher, role="noheader"]
----
ON HOME GRAPH
----
a|
New syntax for privileges affecting home graph.

a|
label:syntax[]
label:new[]
[source, cypher, role="noheader"]
----
CREATE FULLTEXT INDEX ...
----
a|
Allows creating fulltext indexes on nodes or relationships.
They can be dropped by using their name.

a|
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
CREATE INDEX FOR ()-[r:TYPE]-() ...
----
a|
Allows creating indexes on relationships with a particular relationship type and property combination.
They can be dropped by using their name.


a|
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
CREATE LOOKUP INDEX ...
----
a|
Create token lookup index for nodes with any labels or relationships with any relationship type.
They can be dropped by using their name.

a|
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
RENAME ROLE
----
a|
New Cypher command for changing the name of a role.


a|
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
RENAME USER
----
a|
New Cypher command for changing the name of a user.


a|
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
SHOW PROCEDURE[S]
[EXECUTABLE [BY {CURRENT USER \| username}]]
[YIELD ...]
[WHERE ...]
[RETURN ...]
----
a|
New Cypher commands for listing procedures.


a|
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
SHOW [ALL \| BUILT IN \| USER DEFINED] FUNCTION[S]
[EXECUTABLE [BY {CURRENT USER \| username}]]
[YIELD ...]
[WHERE ...]
[RETURN ...]
----
a|
New Cypher commands for listing functions.

|===


[[cypher-deprecations-additions-removals-4.2]]
== Neo4j 4.2

=== Deprecated features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:syntax[]
label:deprecated[]
[source, cypher, role="noheader"]
----
0...
----
a|
Replaced by `+0o...+`.


a|
label:syntax[]
label:deprecated[]
[source, cypher, role="noheader"]
----
0X...
----
a|
Only `+0x...+` (lowercase x) is supported.

a|
label:syntax[]
label:deprecated[]
[source, cypher, role="noheader"]
----
CALL { RETURN 1 }
----
a|
Unaliased expressions are deprecated in subquery `RETURN` clauses. Replaced by:
[source, cypher, role="noheader"]
----
CALL { RETURN 1 AS one }
----
|===

=== Updated features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:functionality[]
label:updated[]
[source, cypher, role="noheader"]
----
SHOW ROLE name PRIVILEGES
----
a|
Can now handle multiple roles.
[source, cypher, role="noheader"]
----
SHOW ROLES n1, n2, ... PRIVILEGES
----


a|
label:functionality[]
label:updated[]
[source, cypher, role="noheader"]
----
SHOW USER name PRIVILEGES
----
a|
Can now handle multiple users.
[source, cypher, role="noheader"]
----
SHOW USERS n1, n2, ... PRIVILEGES
----


a|
label:functionality[]
label:updated[]
[source, cypher, role="noheader"]
----
round(expression, precision)
----
a|
The `round()` function can now take an additional argument to specify rounding precision.


a|
label:functionality[]
label:updated[]
[source, cypher, role="noheader"]
----
round(expression, precision, mode)
----
a|
The `round()` function can now take two additional arguments to specify rounding precision and rounding mode.
|===

=== New features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
SHOW PRIVILEGES [AS [REVOKE] COMMAND[S]]
----
a|
Privileges can now be shown as Cypher commands.

a|
label:syntax[]
label:new[]
[source, cypher, role="noheader"]
----
DEFAULT GRAPH
----
a|
New optional part of the Cypher commands for database privileges.


a|
label:syntax[]
label:new[]
[source, cypher, role="noheader"]
----
0o...
----
a|
Cypher now interprets literals with prefix `0o` as an octal integer literal.

a|
label:syntax[]
label:new[]
[source, cypher, role="noheader"]
----
SET [PLAINTEXT \| ENCRYPTED] PASSWORD
----
a|
For `CREATE USER` and `ALTER USER`, it is now possible to set (or update) a password when the plaintext password is unknown, but the encrypted password is available.


a|
label:functionality[]
label:new[] +
New privilege:
[source, cypher, role="noheader"]
----
EXECUTE
----
a|
New Cypher commands for administering privileges for executing procedures and user defined functions.
See link:{neo4j-docs-base-uri}/operations-manual/{page-version}/authentication-authorization/dbms-administration/#access-control-dbms-administration-execute[The DBMS `EXECUTE` privileges].

a|
label:syntax[]
label:new[]
[source, cypher, role="noheader"]
----
CREATE [BTREE] INDEX ... [OPTIONS {...}]
----
a|
Allows setting index provider and index configuration when creating an index.


a|
label:syntax[]
label:new[]
[source, cypher, role="noheader"]
----
CREATE CONSTRAINT ... IS NODE KEY [OPTIONS {...}]
----
a|
Allows setting index provider and index configuration for the backing index when creating a node key constraint.


a|
label:syntax[]
label:new[]
[source, cypher, role="noheader"]
----
CREATE CONSTRAINT ... IS UNIQUE [OPTIONS {...}]
----
a|
Allows setting index provider and index configuration for the backing index when creating a property uniqueness constraint.

a|
label:syntax[]
label:new[]
[source, cypher, role="noheader"]
----
SHOW CURRENT USER
----
a|
New Cypher command for showing current logged-in user and roles.


a|
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
SHOW [ALL \| BTREE] INDEX[ES] [BRIEF \| VERBOSE [OUTPUT]]
----
a|
New Cypher commands for listing indexes.

Replaces the procedures `db.indexes`, `db.indexDetails` (verbose), and partially `db.schemaStatements` (verbose).

a|
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
SHOW [ALL \| UNIQUE \| NODE EXIST[S] \| RELATIONSHIP EXIST[S] \| EXIST[S] \| NODE KEY] CONSTRAINT[S] [BRIEF \| VERBOSE [OUTPUT]]
----
a|
New Cypher commands for listing constraints.

Replaces the procedures `db.constraints` and partially `db.schemaStatements` (verbose).

a|
label:functionality[]
label:new[] +
New privilege:
[source, cypher, role="noheader"]
----
SHOW INDEX
----
a|
New Cypher command for administering privilege for listing indexes.


a|
label:functionality[]
label:new[] +
New privilege:
[source, cypher, role="noheader"]
----
SHOW CONSTRAINTS
----
a|
New Cypher command for administering privilege for listing constraints.
|===


[[cypher-deprecations-additions-removals-4.1.3]]
== Neo4j 4.1.3

=== New features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:syntax[]
label:new[]
[source, cypher, role="noheader"]
----
CREATE INDEX [name] IF NOT EXISTS FOR ...
----
a|
Makes index creation idempotent. If an index with the name or schema already exists no error will be thrown.

a|
label:syntax[]
label:new[]
[source, cypher, role="noheader"]
----
DROP INDEX name IF EXISTS
----
a|
Makes index deletion idempotent. If no index with the name exists no error will be thrown.

a|
label:syntax[]
label:new[]
[source, cypher, role="noheader"]
----
CREATE CONSTRAINT [name] IF NOT EXISTS ON ...
----
a|
Makes constraint creation idempotent. If a constraint with the name or type and schema already exists no error will be thrown.

a|
label:syntax[]
label:new[]
[source, cypher, role="noheader"]
----
DROP CONSTRAINT name IF EXISTS
----
a|
Makes constraint deletion idempotent. If no constraint with the name exists no error will be thrown.

|===


[[cypher-deprecations-additions-removals-4.1]]
== Neo4j 4.1

=== Restricted features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:functionality[]
label:restricted[]
[source, cypher, role="noheader"]
----
REVOKE ...
----
a|
No longer revokes sub-privileges when revoking a compound privilege, e.g. when revoking `INDEX MANAGEMENT`, any `CREATE INDEX` and `DROP INDEX` privileges will no longer be revoked.

a|
label:functionality[]
label:restricted[]
[source, cypher, role="noheader"]
----
ALL DATABASE PRIVILEGES
----
a|
No longer includes the privileges `START DATABASE` and `STOP DATABASE`.
|===

=== Updated features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:procedure[]
label:updated[]
[source, cypher, role="noheader"]
----
queryId
----
a|
The `queryId` procedure format has changed, and no longer includes the database name. For example, `mydb-query-123` is now `query-123`. This change affects built-in procedures `dbms.listQueries()`, `dbms.listActiveLocks(queryId)`, `dbms.killQueries(queryIds)` `and dbms.killQuery(queryId)`.

a|
label:functionality[]
label:updated[]
[source, cypher, role="noheader"]
----
SHOW PRIVILEGES
----
a|
The returned privileges are a closer match to the original grants and denies, e.g. if granted `MATCH` the command will show that specific privilege and not the `TRAVERSE` and `READ` privileges. Added support for `YIELD` and `WHERE` clauses to allow filtering results.
|===

=== New features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:functionality[]
label:new[] +
New role:
[source, cypher, role="noheader"]
----
PUBLIC
----
a|
The `PUBLIC` role is automatically assigned to all users, giving them a set of base privileges.

a|
label:syntax[]
label:new[] +
For privileges:
[source, cypher, role="noheader"]
----
REVOKE MATCH
----
a|
The `MATCH` privilege can now be revoked.

a|
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
SHOW USERS
----
a|
New support for `YIELD` and `WHERE` clauses to allow filtering results.

a|
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
SHOW ROLES
----
a|
New support for `YIELD` and `WHERE` clauses to allow filtering results.

a|
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
SHOW DATABASES
----
a|
New support for `YIELD` and `WHERE` clauses to allow filtering results.

a|
label:functionality[]
label:new[] +
link:{neo4j-docs-base-uri}/operations-manual/{page-version}/authentication-authorization/database-administration/#access-control-database-administration-transaction[TRANSACTION MANAGEMENT] privileges
a|
New Cypher commands for administering transaction management.

a|
label:functionality[]
label:new[] +
DBMS link:{neo4j-docs-base-uri}/operations-manual/{page-version}/authentication-authorization/dbms-administration/#access-control-dbms-administration-user-management[USER MANAGEMENT] privileges
a|
New Cypher commands for administering user management.

a|
label:functionality[]
label:new[] +
DBMS link:{neo4j-docs-base-uri}/operations-manual/{page-version}/authentication-authorization/dbms-administration/#access-control-dbms-administration-database-management[DATABASE MANAGEMENT] privileges
a|
New Cypher commands for administering database management.

a|
label:functionality[]
label:new[] +
DBMS link:{neo4j-docs-base-uri}/operations-manual/{page-version}/authentication-authorization/dbms-administration/#access-control-dbms-administration-privilege-management[PRIVILEGE MANAGEMENT] privileges
a|
New Cypher commands for administering privilege management.

a|
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
ALL DBMS PRIVILEGES
----
a|
New Cypher command for administering role, user, database and privilege management.


a|
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
ALL GRAPH PRIVILEGES
----
a|
New Cypher command for administering read and write privileges.

a|
label:functionality[]
label:new[] +
Write privileges
a|
New Cypher commands for administering write privileges.

a|
label:functionality[]
label:new[]
[source, cypher, role="noheader"]
----
ON DEFAULT DATABASE
----
a|
New optional part of the Cypher commands for database privileges.
|===


[[cypher-deprecations-additions-removals-4.0]]
== Neo4j 4.0

=== Removed features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:function[]
label:removed[]
[source, cypher, role="noheader"]
----
rels()
----
a|
Replaced by xref:functions/list.adoc#functions-relationships[relationships()].

a|
label:function[]
label:removed[]
[source, cypher, role="noheader"]
----
toInt()
----
a|
Replaced by xref:functions/scalar.adoc#functions-tointeger[toInteger()].

a|
label:function[]
label:removed[]
[source, cypher, role="noheader"]
----
lower()
----
a|
Replaced by xref:functions/string.adoc#functions-tolower[toLower()].

a|
label:function[]
label:removed[]
[source, cypher, role="noheader"]
----
upper()
----
a|
Replaced by xref:functions/string.adoc#functions-toupper[toUpper()].

a|
label:function[]
label:removed[]
[source, cypher, role="noheader"]
----
extract()
----
a|
Replaced by xref:values-and-types/lists.adoc#cypher-list-comprehension[list comprehension].

a|
label:function[]
label:removed[]
[source, cypher, role="noheader"]
----
filter()
----
a|
Replaced by xref:values-and-types/lists.adoc#cypher-list-comprehension[list comprehension].

a|
label:functionality[]
label:removed[] +
For Rule planner:
[source, cypher, role="noheader"]
----
CYPHER planner=rule
----
a|
The `RULE` planner was removed in 3.2, but still possible to trigger using `START` or `CREATE UNIQUE` clauses. Now it is completely removed.


a|
label:functionality[]
label:removed[] +
Explicit indexes
a|
The removal of the `RULE` planner in 3.2 was the beginning of the end for explicit indexes. Now they are completely removed, including the removal of the link:https://neo4j.com/docs/cypher-manual/3.5/schema/index/#explicit-indexes-procedures[built-in procedures for Neo4j 3.3 to 3.5].


a|
label:functionality[]
label:removed[] +
For compiled runtime:
[source, cypher, role="noheader"]
----
CYPHER runtime=compiled
----
a|
Replaced by the new `pipelined` runtime which covers a much wider range of queries.


a|
label:clause[]
label:removed[]
[source, cypher, role="noheader"]
----
CREATE UNIQUE
----
a|
Running queries with this clause will cause a syntax error.

a|
label:clause[]
label:removed[]
[source, cypher, role="noheader"]
----
START
----
a|
Running queries with this clause will cause a syntax error.

a|
label:syntax[]
label:removed[]
[source, cypher, role="noheader"]
----
MATCH (n)-[:A\|:B\|:C {foo: 'bar'}]-() RETURN n
----
a|
Replaced by `MATCH (n)-[:A\|B\|C {foo: 'bar'}]-() RETURN n`.

a|
label:syntax[]
label:removed[]
[source, cypher, role="noheader"]
----
MATCH (n)-[x:A\|:B\|:C]-() RETURN n
----
a|
Replaced by `MATCH (n)-[x:A\|B\|C]-() RETURN n`.


a|
label:syntax[]
label:removed[]
[source, cypher, role="noheader"]
----
MATCH (n)-[x:A\|:B\|:C*]-() RETURN n
----
a|
Replaced by `MATCH (n)-[x:A\|B\|C*]-() RETURN n`.


a|
label:syntax[]
label:removed[]
[source, cypher, role="noheader"]
----
{parameter}
----
a|
Replaced by xref:syntax/parameters.adoc[$parameter].
|===

=== Deprecated features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:syntax[]
label:deprecated[]
[source, cypher, role="noheader"]
----
MATCH (n)-[rs*]-() RETURN rs
----
a|
As in Cypher 3.2, this is replaced by:
[source, cypher, role="noheader"]
----
MATCH p=(n)-[*]-() RETURN relationships(p) AS rs
----

a|
label:syntax[]
label:deprecated[]
[source, cypher, role="noheader"]
----
CREATE INDEX ON :Label(prop)
----
a|
Replaced by `CREATE INDEX FOR (n:Label) ON (n.prop)`.

a|
label:syntax[]
label:deprecated[]
[source, cypher, role="noheader"]
----
DROP INDEX ON :Label(prop)
----
a|
Replaced by `DROP INDEX name`.

a|
label:syntax[]
label:deprecated[]
[source, cypher, role="noheader"]
----
DROP CONSTRAINT ON (n:Label) ASSERT (n.prop) IS NODE KEY
----
a|
Replaced by `DROP CONSTRAINT name`.

a|
label:syntax[]
label:deprecated[]
[source, cypher, role="noheader"]
----
DROP CONSTRAINT ON (n:Label) ASSERT (n.prop) IS UNIQUE
----
a|
Replaced by `DROP CONSTRAINT name`.

a|
label:syntax[]
label:deprecated[]
[source, cypher, role="noheader"]
----
DROP CONSTRAINT ON (n:Label) ASSERT exists(n.prop)
----
a|
Replaced by `DROP CONSTRAINT name`.

a|
label:syntax[]
label:deprecated[]
[source, cypher, role="noheader"]
----
DROP CONSTRAINT ON ()-[r:Type]-() ASSERT exists(r.prop)
----
a|
Replaced by `DROP CONSTRAINT name`.

|===

=== Restricted features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:function[]
label:restricted[]
[source, cypher, role="noheader"]
----
length()
----
a|
Restricted to only work on paths. See xref:functions/scalar.adoc#functions-length[length()] for more details.

a|
label:function[]
label:restricted[]
[source, cypher, role="noheader"]
----
size()
----
a|
Only works for strings, lists and pattern comprehensions, and no longer works for paths.
For versions above 5.0, use a `COUNT` expression instead:
[source, cypher, role="noheader"]
----
RETURN COUNT { (a)-[]->(b) }
----
For versions below 5.0, use a pattern comprehension instead:
[source, cypher, role="noheader"]
----
RETURN size([ (a)-[]->(b) \| a ])
----
See xref:functions/scalar.adoc#functions-size[size()] and xref:subqueries/count.adoc[Count Subqueries] for more details.
|===

=== Updated features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:syntax[]
label:extended[]
[source, cypher, role="noheader"]
----
CREATE CONSTRAINT [name] ON ...
----
a|
The create constraint syntax can now include a name.

The `IS NODE KEY` and `IS UNIQUE` versions of this command replace the procedures `db.createNodeKey` and `db.createUniquePropertyConstraint`, respectively.

|===

=== New features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:functionality[]
label:new[] +
Pipelined runtime:
[source, cypher, role="noheader"]
----
CYPHER runtime=pipelined
----
a|
This Neo4j Enterprise Edition only feature involves a new runtime that has many performance enhancements.

a|
label:functionality[]
label:new[] +
link:{neo4j-docs-base-uri}/operations-manual/{page-version}/database-administration/standard-databases/manage-databases/[Multi-database administration]
a|
New Cypher commands for administering multiple databases.

a|
label:functionality[]
label:new[] +
link:{neo4j-docs-base-uri}/operations-manual/{page-version}/authentication-authorization/[Access control]
a|
New Cypher commands for administering role-based access control.

a|
label:functionality[]
label:new[] +
link:{neo4j-docs-base-uri}/operations-manual/{page-version}/authentication-authorization/manage-privileges/[Fine-grained security]
a|
New Cypher commands for administering dbms, database, graph and sub-graph access control.

a|
label:syntax[]
label:new[]
[source, cypher, role="noheader"]
----
CREATE INDEX [name] FOR (n:Label) ON (n.prop)
----
a|
New syntax for creating indexes, which can include a name.

Replaces the `db.createIndex` procedure.

a|
label:syntax[]
label:new[]
[source, cypher, role="noheader"]
----
DROP INDEX name
----
a|
xref:indexes/search-performance-indexes/managing-indexes.adoc#indexes-drop-an-index[New command] for dropping an index by name.


a|
label:syntax[]
label:new[]
[source, cypher, role="noheader"]
----
DROP CONSTRAINT name
----
a|
xref:constraints/managing-constraints.adoc#drop-constraint[New command] for dropping a constraint by name, no matter the type.


a|
label:clause[]
label:new[]
[source, cypher, role="noheader"]
----
WHERE EXISTS {...}
----
a|
`EXISTS` subqueries are subclauses used to filter the results of a `MATCH`, `OPTIONAL MATCH`, or `WITH` clause.

a|
label:clause[]
label:new[]
[source, cypher, role="noheader"]
----
USE neo4j
----
a|
New clause to specify which graph a query, or query part, is executed against.

|===


[[cypher-deprecations-additions-removals-3.5]]
== Neo4j 3.5

=== Deprecated features

[cols="2", options="header"]
|===
| Feature
| Details

a|
label:functionality[]
label:deprecated[] +
Compiled runtime:
[source, cypher, role="noheader"]
----
CYPHER runtime=compiled
----
a|
The compiled runtime will be discontinued in the next major release. It might still be used for default queries in order to not cause regressions, but explicitly requesting it will not be possible.

a|
label:function[]
label:deprecated[]
[source, cypher, role="noheader"]
----
extract()
----
a|
Replaced by xref:values-and-types/lists.adoc#cypher-list-comprehension[list comprehension].

a|
label:function[]
label:deprecated[]
[source, cypher, role="noheader"]
----
filter()
----
a|
Replaced by xref:values-and-types/lists.adoc#cypher-list-comprehension[list comprehension].
|===


[[cypher-deprecations-additions-removals-3.4]]
== Neo4j 3.4
[options="header"]
|===
| Feature          | Type | Change | Details
| xref:values-and-types/spatial.adoc[Spatial point types] | Functionality | Amendment | A point -- irrespective of which Coordinate Reference System is used -- can be stored as a property and is able to be backed by an index. Prior to this, a point was a virtual property only.
| xref:functions/spatial.adoc#functions-point-cartesian-3d[point() - Cartesian 3D] | Function | Added |
| xref:functions/spatial.adoc#functions-point-wgs84-3d[point() - WGS 84 3D] | Function | Added |
| xref:functions/scalar.adoc#functions-randomuuid[randomUUID()] | Function | Added |
| xref:values-and-types/temporal.adoc[Temporal types]  | Functionality | Added | Supports storing, indexing and working with the following temporal types: Date, Time, LocalTime, DateTime, LocalDateTime and Duration.
| xref:functions/temporal/index.adoc[Temporal functions]  | Functionality | Added | Functions allowing for the creation and manipulation of values for each temporal type -- _Date_, _Time_, _LocalTime_, _DateTime_, _LocalDateTime_ and _Duration_.
| xref:syntax/operators.adoc#query-operators-temporal[Temporal operators]  | Functionality | Added | Operators allowing for the manipulation of values for each temporal type -- _Date_, _Time_, _LocalTime_, _DateTime_, _LocalDateTime_ and _Duration_.
|  xref:functions/string.adoc#functions-tostring[toString()]   | Function  | Extended | Now also allows temporal values as input (i.e. values of type _Date_, _Time_, _LocalTime_, _DateTime_, _LocalDateTime_ or _Duration_).
|===


[[cypher-deprecations-additions-removals-3.3]]
== Neo4j 3.3
[options="header"]
|===
| Feature          | Type | Change | Details
| `START`          | Clause | Removed | As in Cypher 3.2, any queries using the `START` clause will revert back to Cypher 3.1 `planner=rule`.
However, there are link:https://neo4j.com/docs/cypher-manual/3.5/schema/index/#explicit-indexes-procedures[built-in procedures for Neo4j versions 3.3 to 3.5] for accessing explicit indexes. The procedures will enable users to use the current version of Cypher and the cost planner together with these indexes.
An example of this is `CALL db.index.explicit.searchNodes('my_index','email:me*')`.
| `CYPHER runtime=slotted` (Faster interpreted runtime) | Functionality | Added | Neo4j Enterprise Edition only
| xref:functions/aggregating.adoc#functions-max[max()], xref:functions/aggregating.adoc#functions-min[min()] | Function  | Extended | Now also supports aggregation over sets containing lists of strings and/or numbers, as well as over sets containing strings, numbers, and lists of strings and/or numbers
|===


[[cypher-deprecations-additions-removals-3.2]]
== Neo4j 3.2
[options="header"]
|===
| Feature          | Type | Change | Details
| `CYPHER planner=rule` (Rule planner)    | Functionality | Removed | All queries now use the cost planner. Any query prepended thus will fall back to using Cypher 3.1.
| `CREATE UNIQUE`     | Clause | Removed | Running such queries will fall back to using Cypher 3.1 (and use the rule planner)
| `START`     | Clause | Removed | Running such queries will fall back to using Cypher 3.1 (and use the rule planner)
| `MATCH (n)-[rs*]-() RETURN rs`     | Syntax | Deprecated | Replaced by `MATCH p=(n)-[*]-() RETURN relationships(p) AS rs`
| `MATCH (n)-[:A\|:B\|:C {foo: 'bar'}]-() RETURN n`     | Syntax | Deprecated | Replaced by `MATCH (n)-[:A\|B\|C {foo: 'bar'}]-() RETURN n`
| `MATCH (n)-[x:A\|:B\|:C]-() RETURN n`     | Syntax | Deprecated | Replaced by `MATCH (n)-[x:A\|B\|C]-() RETURN n`
| `MATCH (n)-[x:A\|:B\|:C*]-() RETURN n`     | Syntax | Deprecated | Replaced by `MATCH (n)-[x:A\|B\|C*]-() RETURN n`
| link:/docs/java-reference/5/extending-neo4j/aggregation-functions#extending-neo4j-aggregation-functions[User-defined aggregation functions] | Functionality | Added |
| xref:indexes/search-performance-indexes/managing-indexes.adoc[Composite indexes] | Index | Added |
| xref:constraints/managing-constraints.adoc#create-key-constraint[Node Key] | Index | Added | Neo4j Enterprise Edition only
| `CYPHER runtime=compiled` (Compiled runtime) | Functionality | Added | Neo4j Enterprise Edition only
| xref:functions/list.adoc#functions-reverse-list[reverse()] | Function  | Extended | Now also allows a list as input
| xref:functions/aggregating.adoc#functions-max[max()], xref:functions/aggregating.adoc#functions-min[min()] | Function  | Extended | Now also supports aggregation over a set containing both strings and numbers
|===


[[cypher-deprecations-additions-removals-3.1]]
== Neo4j 3.1
[options="header"]
|===
| Feature     | Type | Change | Details
| `rels()`    | Function  | Deprecated | Replaced by xref:functions/list.adoc#functions-relationships[relationships()]
| `toInt()`   | Function  | Deprecated | Replaced by xref:functions/scalar.adoc#functions-tointeger[toInteger()]
| `lower()`   | Function  | Deprecated | Replaced by xref:functions/string.adoc#functions-tolower[toLower()]
| `upper()`   | Function  | Deprecated | Replaced by xref:functions/string.adoc#functions-toupper[toUpper()]
| xref:functions/scalar.adoc#functions-toboolean[toBoolean()] | Function | Added |
| xref:values-and-types/maps.adoc#cypher-map-projection[Map projection] | Syntax | Added |
| xref:values-and-types/lists.adoc#cypher-pattern-comprehension[Pattern comprehension] | Syntax | Added |
| link:/docs/java-reference/5/extending-neo4j/functions#extending-neo4j-functions[User-defined functions] | Functionality | Added |
| xref:clauses/call.adoc[CALL\...YIELD\...WHERE]   | Clause  | Extended  | Records returned by `YIELD` may be filtered further using `WHERE`
|===


[[cypher-deprecations-additions-removals-3.0]]
== Neo4j 3.0
[options="header"]
|===
| Feature          | Type | Change | Details
| `has()`  | Function  | Removed | Replaced by xref:functions/predicate.adoc#functions-exists[exists()]
| `str()`  | Function  | Removed | Replaced by xref:functions/string.adoc#functions-tostring[toString()]
| `+{parameter}+` | Syntax | Deprecated | Replaced by xref:syntax/parameters.adoc[$parameter]
| xref:functions/scalar.adoc#functions-properties[properties()]  | Function  | Added  |
| xref:clauses/call.adoc[CALL [\...YIELD\]]   | Clause  | Added  |
| xref:functions/spatial.adoc#functions-point-cartesian-2d[point() - Cartesian 2D] | Function | Added |
| xref:functions/spatial.adoc#functions-point-wgs84-2d[point() - WGS 84 2D] | Function | Added |
| xref:functions/spatial.adoc#functions-distance[distance()] | Function | Added |
| link:/docs/java-reference/5/extending-neo4j/procedures#extending-neo4j-procedures[User-defined procedures] | Functionality | Added |
| xref:functions/string.adoc#functions-tostring[toString()]   | Function  | Extended | Now also allows Boolean values as input
|===
